Function.prototype.name===void 0&&Object.defineProperty!==void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/,t=e.exec(this.toString());return t&&1<t.length?t[1].trim():""}}),String.prototype.trimRight===void 0&&(String.prototype.trimRight=function(){return(this+"").replace(/\s+$/,"")});var stylus=function(){function e(t){var o=e.resolve(t),n=e.modules[o];if(!n)throw new Error("failed to require \""+t+"\"");return n.exports||(n.exports={},n.call(n.exports,n,n.exports,e.relative(o))),n.exports}return e.modules={},e.resolve=function(t){var o=t+".js",n=t+"/index.js";return e.modules[o]&&o||e.modules[n]&&n||t},e.register=function(t,o){e.modules[t]=o},e.relative=function(t){return function(o){if("."!=o[0])return e(o);var n=t.split("/"),r=o.split("/");n.pop();for(var s,a=0;a<r.length;a++)s=r[a],".."==s?n.pop():"."!=s&&n.push(s);return e(n.join("/"))}},e.register("path.js",function(e,t){function o(e,t){for(var o,n=0,r=e.length-1;0<=r;r--)o=e[r],"."==o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--);if(t)for(;n--;n)e.unshift("..");return e}var n=/^([\s\S]+\/(?!$)|\/)?((?:[\s\S]+?)?(\.[^.]*)?)$/;t.normalize=function(e){var t="/"===e.charAt(0),n="/"===e.slice(-1);return e=o(e.split("/").filter(function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(e.filter(function(e){return e&&"string"==typeof e}).join("/"))},t.relative=function(e,o){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var o=e.length-1;0<=o&&""===e[o];o--);return t>o?[]:e.slice(t,o-t+1)}e=t.resolve(e).substr(1),o=t.resolve(o).substr(1);for(var r=n(e.split("/")),s=n(o.split("/")),a=Math.min(r.length,s.length),l=a,p=0;p<a;p++)if(r[p]!==s[p]){l=p;break}for(var c=[],p=l;p<r.length;p++)c.push("..");return c=c.concat(s.slice(l)),c.join("/")},t.dirname=function(e){var t=n.exec(e)[1]||"";return t?1!==t.length&&1?t.substring(0,t.length-1):t:"."},t.basename=function(e,t){var o=n.exec(e)[2]||"";return t&&o.substr(-1*t.length)===t&&(o=o.substr(0,o.length-t.length)),o},t.extname=function(e){return n.exec(e)[3]||""}}),e.register("colors.js",function(e){e.exports={aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],transparent:[0,0,0,0],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1],rebeccapurple:[102,51,153,1]}}),e.register("errors.js",function(e,t){function o(e){this.name="ParseError",this.message=e,Error.captureStackTrace(this,o)}function n(e){this.name="SyntaxError",this.message=e,Error.captureStackTrace(this,o)}t.ParseError=o,t.SyntaxError=n,n.prototype.__proto__=Error.prototype,o.prototype.__proto__=Error.prototype,n.prototype.__proto__=Error.prototype}),e.register("units.js",function(e){e.exports=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","in","pt","pc","px","deg","grad","rad","turn","s","ms","Hz","kHz","dpi","dpcm","dppx","x","%","fr"]}),e.register("functions/index.js",function(e,t,o){t["add-property"]=o("./add-property"),t.adjust=o("./adjust"),t.alpha=o("./alpha"),t["base-convert"]=o("./base-convert"),t.basename=o("./basename"),t.blend=o("./blend"),t.blue=o("./blue"),t.clone=o("./clone"),t.component=o("./component"),t.contrast=o("./contrast"),t.convert=o("./convert"),t["current-media"]=o("./current-media"),t.define=o("./define"),t.dirname=o("./dirname"),t.error=o("./error"),t.extname=o("./extname"),t.green=o("./green"),t.hsl=o("./hsl"),t.hsla=o("./hsla"),t.hue=o("./hue"),t.length=o("./length"),t.lightness=o("./lightness"),t["list-separator"]=o("./list-separator"),t.lookup=o("./lookup"),t.luminosity=o("./luminosity"),t.match=o("./match"),t.math=o("./math"),t.merge=t.extend=o("./merge"),t.operate=o("./operate"),t["opposite-position"]=o("./opposite-position"),t.p=o("./p"),t.pathjoin=o("./pathjoin"),t.pop=o("./pop"),t.push=t.append=o("./push"),t.range=o("./range"),t.red=o("./red"),t.remove=o("./remove"),t.replace=o("./replace"),t.rgb=o("./rgb"),t.rgba=o("./rgba"),t.s=o("./s"),t.saturation=o("./saturation"),t["selector-exists"]=o("./selector-exists"),t.selector=o("./selector"),t.selectors=o("./selectors"),t.shift=o("./shift"),t.split=o("./split"),t.substr=o("./substr"),t.slice=o("./slice"),t.tan=o("./tan"),t.trace=o("./trace"),t.transparentify=o("./transparentify"),t.type=t.typeof=t["type-of"]=o("./type"),t.unit=o("./unit"),t.unquote=o("./unquote"),t.unshift=t.prepend=o("./unshift"),t.warn=o("./warn"),t["-math-prop"]=o("./math-prop"),t["-prefix-classes"]=o("./prefix-classes")}),e.register("functions/url.js",function(e,t,o){var n=o("../visitor/compiler"),r=o("../renderer").events,s=o("../nodes"),i=o("../path").extname,a=o("../utils"),l={".gif":"image/gif",".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".svg":"image/svg+xml",".webp":"image/webp",".ttf":"application/x-font-ttf",".eot":"application/vnd.ms-fontobject",".woff":"application/font-woff",".woff2":"application/font-woff2"},p={BASE_64:"base64",UTF8:"charset=utf-8"};e.exports=function(e){function t(e,t){var l=new n(e),d=p.BASE_64;l.isURL=!0,e=e.nodes.map(function(e){return l.visit(e)}).join(""),e=parse(e);var m,g,h=i(e.pathname),y=u[h],f=e.hash||"",k=new s.Literal("url(\""+e.href+"\")"),v=o.concat(this.paths);if(!y)return k;if(e.protocol)return k;var x=a.lookup(e.pathname,v);return x?(m=fs.readFileSync(x),!1!==c&&m.length>c)?k:(t&&"utf8"==t.first.val.toLowerCase()?(d=p.UTF8,g=m.toString("utf8").replace(/\s+/g," ").replace(/[{}\|\\\^~\[\]`"<>#%]/g,function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}).trim()):g=m.toString(d)+f,new s.Literal("url(\"data:"+y+";"+d+","+g+"\")")):(r.emit("file not found","File "+k+" could not be found, literal url retained!"),k)}e=e||{};var o=e.paths||[],c=null==e.limit?3e4:e.limit,u=e.mimes||l;return t.raw=!0,t},e.exports.mimes=l}),e.register("functions/add-property.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(e,t){n.assertType(e,"expression","name"),e=n.unwrap(e).first,n.assertString(e,"name"),n.assertType(t,"expression","expr");var o=new r.Property([e],t),s=this.closestBlock,i=s.nodes.length,a=s.nodes.slice(0,s.index),l=s.nodes.slice(s.index++,i);return a.push(o),s.nodes=a.concat(l),o}).raw=!0}),e.register("functions/adjust.js",function(e,t,o){var n=o("../utils");e.exports=function(e,t,o){n.assertColor(e,"color"),n.assertString(t,"prop"),n.assertType(o,"unit","amount");var r=e.hsla.clone();if(t={hue:"h",saturation:"s",lightness:"l"}[t.string],!t)throw new Error("invalid adjustment property");var s=o.val;return"%"==o.type&&(s="l"==t&&0<s?(100-r[t])*s/100:r[t]*(s/100)),r[t]+=s,r.rgba}}),e.register("functions/alpha.js",function(e,t,o){var n=o("../nodes"),r=o("./rgba");e.exports=function(e,t){return e=e.rgba,t?r(new n.Unit(e.r),new n.Unit(e.g),new n.Unit(e.b),t):new n.Unit(e.a,"")}}),e.register("functions/base-convert.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(e,t,o){n.assertPresent(e,"number"),n.assertPresent(t,"base"),e=n.unwrap(e).nodes[0].val,t=n.unwrap(t).nodes[0].val,o=o&&n.unwrap(o).nodes[0].val||2;for(var s=(+e).toString(t);s.length<o;)s="0"+s;return new r.Literal(s)}).raw=!0}),e.register("functions/basename.js",function(e,t,o){var n=o("../utils"),r=o("../path");e.exports=function(e,t){return n.assertString(e,"path"),r.basename(e.val,t&&t.val)}}),e.register("functions/blend.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t){return n.assertColor(e),e=e.rgba,t=t||new r.RGBA(255,255,255,1),n.assertColor(t),t=t.rgba,new r.RGBA(e.r*e.a+t.r*(1-e.a),e.g*e.a+t.g*(1-e.a),e.b*e.a+t.b*(1-e.a),e.a+t.a-e.a*t.a)}}),e.register("functions/blue.js",function(e,t,o){var n=o("../nodes"),r=o("./rgba");e.exports=function(e,t){return e=e.rgba,t?r(new n.Unit(e.r),new n.Unit(e.g),t,new n.Unit(e.a)):new n.Unit(e.b,"")}}),e.register("functions/clone.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){return n.assertPresent(e,"expr"),e.clone()}).raw=!0}),e.register("functions/component.js",function(e,t,o){var n=o("../utils"),r=o("../nodes"),s={red:"r",green:"g",blue:"b",alpha:"a",hue:"h",saturation:"s",lightness:"l"},i={hue:"deg",saturation:"%",lightness:"%"},a={red:"rgba",blue:"rgba",green:"rgba",alpha:"rgba",hue:"hsla",saturation:"hsla",lightness:"hsla"};e.exports=function(e,t){n.assertColor(e,"color"),n.assertString(t,"name");var t=t.string,o=i[t],l=a[t],t=s[t];if(!t)throw new Error("invalid color component \""+t+"\"");return new r.Unit(e[l][t],o)}}),e.register("functions/contrast.js",function(e,t,o){var n=o("../utils"),r=o("../nodes"),s=o("./blend"),i=o("./luminosity");e.exports=function e(t,o){function e(n,r){1>n.a&&(n=s(n,r));var a=i(r).val+.05,l=i(n).val+.05,p=a/l;return l>a&&(p=1/p),Math.round(10*p)/10}if("rgba"!=t.nodeName&&"hsla"!=t.nodeName)return new r.Literal("contrast("+(t.isNull?"":t.toString())+")");var a=new r.Object;if(t=t.rgba,o=o||new r.RGBA(255,255,255,1),n.assertColor(o),o=o.rgba,1<=o.a){var l=new r.Unit(e(t,o));a.set("ratio",l),a.set("error",new r.Unit(0)),a.set("min",l),a.set("max",l)}else{function n(e,t){return Math.min(Math.max(0,(e-t*o.a)/(1-o.a)),255)}var p=e(t,s(o,new r.RGBA(0,0,0,1))),c=e(t,s(o,new r.RGBA(255,255,255,1))),u=Math.max(p,c),d=new r.RGBA(n(t.r,o.r),n(t.g,o.g),n(t.b,o.b),1),m=e(t,s(o,d));a.set("ratio",new r.Unit(Math.round(50*(m+u))/100)),a.set("error",new r.Unit(Math.round(50*(u-m))/100)),a.set("min",new r.Unit(m)),a.set("max",new r.Unit(u))}return a}}),e.register("functions/convert.js",function(e,t,o){var n=o("../utils");e.exports=function(e){return n.assertString(e,"str"),n.parseString(e.string)}}),e.register("functions/current-media.js",function(e,t,o){var n=o("../nodes");e.exports=function(){function e(o){return"media"==o.nodeName?(o.val=t.visit(o.val),o.toString()):o.block.parent.node?e(o.block.parent.node):void 0}var t=this;return new n.String(e(this.closestBlock.node)||"")}}),e.register("functions/define.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o){n.assertType(e,"string","name"),t=n.unwrap(t);var s=this.currentScope;o&&o.toBoolean().isTrue&&(s=this.global.scope);var i=new r.Ident(e.val,t);return s.add(i),r.nil}}),e.register("functions/dirname.js",function(e,t,o){var n=o("../utils"),r=o("../path");e.exports=function(e){return n.assertString(e,"path"),r.dirname(e.val).replace(/\\/g,"/")}}),e.register("functions/error.js",function(e,t,o){var n=o("../utils");e.exports=function(e){n.assertType(e,"string","msg");var t=new Error(e.val);throw t.fromStylus=!0,t}}),e.register("functions/extname.js",function(e,t,o){var n=o("../utils"),r=o("../path");e.exports=function(e){return n.assertString(e,"path"),r.extname(e.val)}}),e.register("functions/green.js",function(e,t,o){var n=o("../nodes"),r=o("./rgba");e.exports=function(e,t){return e=e.rgba,t?r(new n.Unit(e.r),t,new n.Unit(e.b),new n.Unit(e.a)):new n.Unit(e.g,"")}}),e.register("functions/hsl.js",function(e,t,o){var n=o("../utils"),r=o("../nodes"),s=o("./hsla");e.exports=function(e,t,o){return 1==arguments.length?(n.assertColor(e,"color"),e.hsla):s(e,t,o,new r.Unit(1))}}),e.register("functions/hsla.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o,s){switch(arguments.length){case 1:return n.assertColor(e),e.hsla;case 2:n.assertColor(e);var i=e.hsla;n.assertType(t,"unit","alpha");var s=t.clone();return"%"==s.type&&(s.val/=100),new r.HSLA(i.h,i.s,i.l,s.val);default:n.assertType(e,"unit","hue"),n.assertType(t,"unit","saturation"),n.assertType(o,"unit","lightness"),n.assertType(s,"unit","alpha");var s=s.clone();return s&&"%"==s.type&&(s.val/=100),new r.HSLA(e.val,t.val,o.val,s.val);}}}),e.register("functions/hue.js",function(e,t,o){var n=o("../nodes"),r=o("./hsla"),s=o("./component");e.exports=function(e,t){if(t){var o=e.hsla;return r(t,new n.Unit(o.s),new n.Unit(o.l),new n.Unit(o.a))}return s(e,new n.String("hue"))}}),e.register("functions/length.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){if(e){if(e.nodes){var t=n.unwrap(e).nodes;return 1==t.length&&"object"==t[0].nodeName?t[0].length:t.length}return 1}return 0}).raw=!0}),e.register("functions/lightness.js",function(e,t,o){var n=o("../nodes"),r=o("./hsla"),s=o("./component");e.exports=function(e,t){if(t){var o=e.hsla;return r(new n.Unit(o.h),new n.Unit(o.s),t,new n.Unit(o.a))}return s(e,new n.String("lightness"))}}),e.register("functions/list-separator.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(e){return e=n.unwrap(e),new r.String(e.isList?",":" ")}).raw=!0}),e.register("functions/lookup.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e){n.assertType(e,"string","name");var t=this.lookup(e.val);return t?this.visit(t):r.nil}}),e.register("functions/luminosity.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e){function t(e){return e/=255,.03928>e?e/12.92:Math.pow((e+.055)/1.055,2.4)}return n.assertColor(e),e=e.rgba,new r.Unit(.2126*t(e.r)+.7152*t(e.g)+.0722*t(e.b))}}),e.register("functions/match.js",function(e,t,o){function n(e){return e=e&&e.string,!!e&&e.split("").every(function(e){return~"igm".indexOf(e)})}var r=o("../utils"),s=o("../nodes");e.exports=function(e,t,o){r.assertType(e,"string","pattern"),r.assertString(t,"val");var s=new RegExp(e.val,n(o)?o.string:"");return t.string.match(s)}}),e.register("functions/math-prop.js",function(e,t,o){var n=o("../nodes");e.exports=function(e){return new n.Unit(Math[e.string])}}),e.register("functions/math.js",function(e,t,o){var r=o("../utils"),s=o("../nodes");e.exports=function(e,t){return r.assertType(e,"unit","n"),r.assertString(t,"fn"),new s.Unit(Math[t.string](e.val),e.type)}}),e.register("functions/merge.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){n.assertPresent(e,"dest"),e=n.unwrap(e).first,n.assertType(e,"object","dest");for(var t=n.unwrap(arguments[arguments.length-1]).first,o=!0===t.val,r=1,s=arguments.length-o;r<s;++r)n.merge(e.vals,n.unwrap(arguments[r]).first.vals,o);return e}).raw=!0}),e.register("functions/operate.js",function(e,t,o){var n=o("../utils");e.exports=function(e,t,o){return n.assertType(e,"string","op"),n.assertPresent(t,"left"),n.assertPresent(o,"right"),t.operate(e.val,o)}}),e.register("functions/opposite-position.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(e){var t=[];return n.unwrap(e).nodes.forEach(function(e,o){n.assertString(e,"position "+o),e=function(){switch(e.string){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";case"center":return"center";default:throw new Error("invalid position "+e);}}(),t.push(new r.Literal(e))}),t}).raw=!0}),e.register("functions/p.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(){return[].slice.call(arguments).forEach(function(e){e=n.unwrap(e),e.nodes.length&&console.log("\x1B[90minspect:\x1B[0m %s",e.toString().replace(/^\(|\)$/g,""))}),r.nil}).raw=!0}),e.register("functions/pathjoin.js",function(e,t,o){var n=o("../path");(e.exports=function(){var e=[].slice.call(arguments).map(function(e){return e.first.string});return n.join.apply(null,e).replace(/\\/g,"/")}).raw=!0}),e.register("functions/pop.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){return e=n.unwrap(e),e.nodes.pop()}).raw=!0}),e.register("functions/prefix-classes.js",function(e,t,o){var n=o("../utils");e.exports=function(e,t){n.assertString(e,"prefix"),n.assertType(t,"block","block");var o=this.prefix;return this.options.prefix=this.prefix=e.string,t=this.visit(t),this.options.prefix=this.prefix=o,t}}),e.register("functions/push.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){e=n.unwrap(e);for(var t=1,o=arguments.length;t<o;++t)e.nodes.push(n.unwrap(arguments[t]).clone());return e.nodes.length}).raw=!0}),e.register("functions/range.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o){if(n.assertType(e,"unit","start"),n.assertType(t,"unit","stop"),!o)o=new r.Unit(1);else if(n.assertType(o,"unit","step"),0==o.val)throw new Error("ArgumentError: \"step\" argument must not be zero");for(var s=new r.Expression,a=e.val;a<=t.val;a+=o.val)s.push(new r.Unit(a,e.type));return s}}),e.register("functions/red.js",function(e,t,o){var n=o("../nodes"),r=o("./rgba");e.exports=function(e,t){return e=e.rgba,t?r(t,new n.Unit(e.g),new n.Unit(e.b),new n.Unit(e.a)):new n.Unit(e.r,"")}}),e.register("functions/remove.js",function(e,t,o){var n=o("../utils");e.exports=function(e,t){return n.assertType(e,"object","object"),n.assertString(t,"key"),delete e.vals[t.string],e}}),e.register("functions/replace.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o){n.assertString(e,"pattern"),n.assertString(t,"replacement"),n.assertString(o,"val"),e=new RegExp(e.string,"g");var s=o.string.replace(e,t.string);return o instanceof r.Ident?new r.Ident(s):new r.String(s)}}),e.register("functions/rgb.js",function(e,t,o){var n=o("../utils"),r=o("../nodes"),s=o("./rgba");e.exports=function(e,t,o){switch(arguments.length){case 1:n.assertColor(e);var i=e.rgba;return new r.RGBA(i.r,i.g,i.b,1);default:return s(e,t,o,new r.Unit(1));}}}),e.register("functions/rgba.js",function(e,t,o){var n=o("../utils"),s=o("../nodes");e.exports=function(e,t,o,i){switch(arguments.length){case 1:return n.assertColor(e),e.rgba;case 2:n.assertColor(e);var a=e.rgba;return n.assertType(t,"unit","alpha"),i=t.clone(),"%"==i.type&&(i.val/=100),new s.RGBA(a.r,a.g,a.b,i.val);default:n.assertType(e,"unit","red"),n.assertType(t,"unit","green"),n.assertType(o,"unit","blue"),n.assertType(i,"unit","alpha");var l="%"==e.type?Math.round(2.55*e.val):e.val,r="%"==t.type?Math.round(2.55*t.val):t.val,p="%"==o.type?Math.round(2.55*o.val):o.val;return i=i.clone(),i&&"%"==i.type&&(i.val/=100),new s.RGBA(l,r,p,i.val);}}}),e.register("functions/s.js",function(e,t,o){var n=o("../utils"),r=o("../nodes"),s=o("../visitor/compiler");(e.exports=function(e){e=n.unwrap(e).nodes[0],n.assertString(e);var t=this,o=e.string,a=arguments,l=1;return o=o.replace(/%(s|d)/g,function(e,o){var i=a[l++]||r.nil;switch(o){case"s":return new s(i,t.options).compile();case"d":if(i=n.unwrap(i).first,"unit"!=i.nodeName)throw new Error("%d requires a unit");return i.val;}}),new r.Literal(o)}).raw=!0}),e.register("functions/saturation.js",function(e,t,o){var n=o("../nodes"),r=o("./hsla"),s=o("./component");e.exports=function(e,t){if(t){var o=e.hsla;return r(new n.Unit(o.h),t,new n.Unit(o.l),new n.Unit(o.a))}return s(e,new n.String("saturation"))}}),e.register("functions/selector-exists.js",function(e,t,o){var n=o("../utils");e.exports=function(e){if(n.assertString(e,"selector"),!this.__selectorsMap__){var t=o("../visitor/normalizer"),r=new t(this.root.clone());r.visit(r.root),this.__selectorsMap__=r.map}return e.string in this.__selectorsMap__}}),e.register("functions/selector.js",function(e,t,o){function n(e,t){e.forEach(function(e){e=e.first,s.assertString(e,"selector"),t.push(r(e.string))})}function r(e){var t,n=new o("../parser"),r=new n(e);return r.state.push("selector-parts"),t=r.selector(),t.forEach(function(e){e.val=e.segments.map(function(e){return e.toString()}).join("")}),t}var s=o("../utils");(e.exports=function(){var e=this.selectorStack,t=[].slice.call(arguments);if(1==t.length){var i=s.unwrap(t[0]),a=i.nodes.length;if(1==a){s.assertString(i.first,"selector");var l=o("../selector-parser"),p=i.first.string,c=new l(p).parse().val;if(c==p)return p;e.push(r(p))}else 1<a&&(i.isList?n(i.nodes,e):e.push(r(i.nodes.map(function(e){return s.assertString(e,"selector"),e.string}).join(" "))))}else 1<t.length&&n(t,e);return e.length?s.compileSelectors(e).join(","):"&"}).raw=!0}),e.register("functions/selectors.js",function(e,t,o){var n=o("../nodes"),r=o("../selector-parser");e.exports=function(){var e=this.selectorStack,t=new n.Expression(!0);if(e.length)for(var o=0;o<e.length;o++){var s,a=e[o];if(1<a.length)t.push(new n.String(a.map(function(e){return s=new r(e.val).parse().nested,(s&&o?"& ":"")+e.val}).join(",")));else{var l=a[0].val;s=new r(l).parse().nested,t.push(new n.String((s&&o?"& ":"")+l))}}else t.push(new n.String("&"));return t}}),e.register("functions/shift.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){return e=n.unwrap(e),e.nodes.shift()}).raw=!0}),e.register("functions/split.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t){n.assertString(e,"delimiter"),n.assertString(t,"val");for(var o=t.string.split(e.string),s=new r.Expression,a=t instanceof r.Ident?r.Ident:r.String,l=0,p=o.length;l<p;++l)s.nodes.push(new a(o[l]));return s}}),e.register("functions/slice.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");(e.exports=function(e,t,o){if(t=t&&t.nodes[0].val,o=o&&o.nodes[0].val,e=n.unwrap(e).nodes,1<e.length)return n.coerce(e.slice(t,o),!0);var s=e[0].string.slice(t,o);return e[0]instanceof r.Ident?new r.Ident(s):new r.String(s)}).raw=!0}),e.register("functions/substr.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o){n.assertString(e,"val"),n.assertType(t,"unit","start"),o=o&&o.val;var s=e.string.substr(t.val,o);return e instanceof r.Ident?new r.Ident(s):new r.String(s)}}),e.register("functions/tan.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function e(t){n.assertType(t,"unit","angle");var o=t.val;"deg"===t.type&&(o*=Math.PI/180);var s=Math.pow(10,9),i=Math.round(1000000000*Math.sin(o))/1000000000,a=Math.round(1000000000*Math.cos(o))/1000000000,e=Math.round(1000000000*i/a)/1000000000;return new r.Unit(e,"")}}),e.register("functions/trace.js",function(e,t,o){var n=o("../nodes");e.exports=function(){return console.log(this.stack),n.nil}}),e.register("functions/transparentify.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e,t,o){function s(o){return 0==i?t[o]:t[o]+(e[o]-t[o])/i}n.assertColor(e),e=e.rgba,t=t||new r.RGBA(255,255,255,1),o||!t||t.rgba||(o=t,t=new r.RGBA(255,255,255,1)),n.assertColor(t),t=t.rgba;var i=["r","g","b"].map(function(o){return(e[o]-t[o])/((0<e[o]-t[o]?255:0)-t[o])}).sort(function(e,t){return e<t})[0];return o&&(n.assertType(o,"unit","alpha"),"%"==o.type?i=o.val/100:!o.type&&(i=o=o.val)),i=Math.max(Math.min(i,1),0),new r.RGBA(s("r"),s("g"),s("b"),Math.round(100*i)/100)}}),e.register("functions/type.js",function(e,t,o){var n=o("../utils");e.exports=function(e){return n.assertPresent(e,"expression"),e.nodeName}}),e.register("functions/unit.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function e(e,t){return n.assertType(e,"unit","unit"),t?(n.assertString(t,"type"),new r.Unit(e.val,t.string)):e.type||""}}),e.register("functions/unquote.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e){return n.assertString(e,"string"),new r.Literal(e.string)}}),e.register("functions/unshift.js",function(e,t,o){var n=o("../utils");(e.exports=function(e){e=n.unwrap(e);for(var t=1,o=arguments.length;t<o;++t)e.nodes.unshift(n.unwrap(arguments[t]));return e.nodes.length}).raw=!0}),e.register("functions/warn.js",function(e,t,o){var n=o("../utils"),r=o("../nodes");e.exports=function(e){return n.assertType(e,"string","msg"),console.warn("Warning: %s",e.val),r.nil}}),e.register("lexer.js",function(e,t,o){function n(e,t){function o(e,t,o,n){var r=n.lastIndexOf("/*",o)>n.lastIndexOf("*/",o),s=n.lastIndexOf("//",o),a=n.lastIndexOf("\n",o),l=0,p=0;if(~s&&s>a)for(;a!=o;){if("'"==n[a]&&(p?p--:p++),"\""==n[a]&&(l?l--:l++),"/"==n[a]&&"/"==n[a+1]){r=!p&&!l;break}++a}return r?e:t+"\r"}t=t||{},this.stash=[],this.indentStack=[],this.indentRe=null,this.lineno=1,this.column=1,"\uFEFF"==e.charAt(0)&&(e=e.slice(1)),this.str=e.replace(/\s+$/,"\n").replace(/\r\n?/g,"\n").replace(/\\ *\n/g,"\r").replace(/([,(:](?!\/\/[^ ])) *(?:\/\/[^\n]*|\/\*.*?\*\/)?\n\s*/g,o).replace(/\s*\n[ \t]*([,)])/g,o)}var s=o("./token"),i=o("./nodes"),a=o("./errors");t=e.exports=n;var l={and:"&&",or:"||",is:"==",isnt:"!=","is not":"!=",":=":"?="};n.prototype={inspect:function(){for(var e,t=this.str,o=[];"eos"!=(e=this.next()).type;)o.push(e.inspect());return this.str=t,o.concat(e.inspect()).join("\n")},lookahead:function(e){for(var t=e-this.stash.length;0<t--;)this.stash.push(this.advance());return this.stash[--e]},skip:function(e){var t=e[0];e=t?t.length:e,this.str=this.str.substr(e),t?this.move(t):this.column+=e},move:function(e){var t=e.match(/\n/g),o=e.lastIndexOf("\n");t&&(this.lineno+=t.length),this.column=~o?e.length-o:this.column+e.length},next:function(){var e=this.stashed()||this.advance();return this.prev=e,e},isPartOfSelector:function(){var e=this.stash[this.stash.length-1]||this.prev;switch(e&&e.type){case"color":return 2==e.val.raw.length;case".":case"[":return!0;}return!1},advance:function(){var e=this.column,t=this.lineno,o=this.eos()||this.nil()||this.sep()||this.keyword()||this.urlchars()||this.comment()||this.newline()||this.escaped()||this.important()||this.literal()||this.fun()||this.anonFunc()||this.atrule()||this.brace()||this.paren()||this.color()||this.string()||this.unit()||this.namedop()||this.boolean()||this.unicode()||this.ident()||this.op()||this.eol()||this.space()||this.selector();return o.lineno=t,o.column=e,o},peek:function(){return this.lookahead(1)},stashed:function(){return this.stash.shift()},eos:function(){return this.str.length?void 0:this.indentStack.length?(this.indentStack.shift(),new s("outdent")):new s("eos")},urlchars:function(){var e;return this.isURL?(e=/^[\/:@.;?&=*!,<>#%0-9]+/.exec(this.str))?(this.skip(e),new s("literal",new i.Literal(e[0]))):void 0:void 0},sep:function(){var e;if(e=/^;[ \t]*/.exec(this.str))return this.skip(e),new s(";")},eol:function(){if("\r"==this.str[0])return++this.lineno,this.skip(1),this.advance()},space:function(){var e;if(e=/^([ \t]+)/.exec(this.str))return this.skip(e),new s("space")},escaped:function(){var e;if(e=/^\\(.)[ \t]*/.exec(this.str)){var t=e[1];return this.skip(e),new s("ident",new i.Literal(t))}},literal:function(){var e;if(e=/^@css[ \t]*\{/.exec(this.str)){this.skip(e);for(var t,o,n=1,r="";(t=this.str[0])&&(this.str=this.str.substr(1),"{"===t?++n:"}"===t?--n:"\n"===t||"\r"===t?++this.lineno:void 0,r+=t,!!n););return r=r.replace(/\s*}$/,""),o=new i.Literal(r),o.css=!0,new s("literal",o)}},important:function(){var e;if(e=/^!important[ \t]*/.exec(this.str))return this.skip(e),new s("ident",new i.Literal("!important"))},brace:function(){var e;if(e=/^([{}])/.exec(this.str)){this.skip(1);var t=e[1];return new s(t,t)}},paren:function(){var e;if(e=/^([()])([ \t]*)/.exec(this.str)){var t=e[1];this.skip(e),")"==t&&(this.isURL=!1);var o=new s(t,t);return o.space=e[2],o}},nil:function(){var e,t;if(e=/^(null)\b[ \t]*/.exec(this.str))return this.skip(e),t=this.isPartOfSelector()?new s("ident",new i.Ident(e[0])):new s("null",i.nil),t},keyword:function(){var e,t;if(e=/^(return|if|else|unless|for|in)\b[ \t]*/.exec(this.str)){var o=e[1];return this.skip(e),t=this.isPartOfSelector()?new s("ident",new i.Ident(e[0])):new s(o,o),t}},namedop:function(){var e,t;if(e=/^(not|and|or|is a|is defined|isnt|is not|is)(?!-)\b([ \t]*)/.exec(this.str)){var o=e[1];return this.skip(e),this.isPartOfSelector()?t=new s("ident",new i.Ident(e[0])):(o=l[o]||o,t=new s(o,o)),t.space=e[2],t}},op:function(){var e;if(e=/^([.]{1,3}|&&|\|\||[!<>=?:]=|\*\*|[-+*\/%]=?|[,=?:!~<>&\[\]])([ \t]*)/.exec(this.str)){var t=e[1];this.skip(e),t=l[t]||t;var o=new s(t,t);return o.space=e[2],this.isURL=!1,o}},anonFunc:function(){var e;if("@"==this.str[0]&&"("==this.str[1])return this.skip(2),e=new s("function",new i.Ident("anonymous")),e.anonymous=!0,e},atrule:function(){var e;if(e=/^@(?:-(\w+)-)?([a-zA-Z0-9-_]+)[ \t]*/.exec(this.str)){this.skip(e);var t=e[1],o=e[2];return"require"===o||"import"===o||"charset"===o||"namespace"===o||"media"===o||"scope"===o||"supports"===o?new s(o):"document"===o?new s("-moz-document"):"block"===o?new s("atblock"):"extend"===o||"extends"===o?new s("extend"):"keyframes"===o?new s(o,t):new s("atrule",t?"-"+t+"-"+o:o)}},comment:function(){if("/"==this.str[0]&&"/"==this.str[1]){var e=this.str.indexOf("\n");return-1==e&&(e=this.str.length),this.skip(e),this.advance()}if("/"==this.str[0]&&"*"==this.str[1]){var e=this.str.indexOf("*/");-1==e&&(e=this.str.length);var t=this.str.substr(0,e+2),o=t.split(/\n|\r/).length-1,n=!0,r=!1;return this.lineno+=o,this.skip(e+2),"!"==t[2]&&(t=t.replace("*!","*"),n=!1),this.prev&&";"==this.prev.type&&(r=!0),new s("comment",new i.Comment(t,n,r))}},boolean:function(){var e;if(e=/^(true|false)\b([ \t]*)/.exec(this.str)){var t=i.Boolean("true"==e[1]);this.skip(e);var o=new s("boolean",t);return o.space=e[2],o}},unicode:function(){var e;if(e=/^u\+[0-9a-f?]{1,6}(?:-[0-9a-f]{1,6})?/i.exec(this.str))return this.skip(e),new s("literal",new i.Literal(e[0]))},fun:function(){var e;if(e=/^(-*[_a-zA-Z$][-\w\d$]*)\(([ \t]*)/.exec(this.str)){var t=e[1];this.skip(e),this.isURL="url"==t;var o=new s("function",new i.Ident(t));return o.space=e[2],o}},ident:function(){var e;if(e=/^-*[_a-zA-Z$][-\w\d$]*/.exec(this.str))return this.skip(e),new s("ident",new i.Ident(e[0]))},newline:function(){var e,t;if(this.indentRe?e=this.indentRe.exec(this.str):(t=/^\n([\t]*)[ \t]*/,e=t.exec(this.str),e&&!e[1].length&&(t=/^\n([ \t]*)/,e=t.exec(this.str)),e&&e[1].length&&(this.indentRe=t)),e){var o,n=e[1].length;if(this.skip(e)," "===this.str[0]||"\t"===this.str[0])throw new a.SyntaxError("Invalid indentation. You can use tabs or spaces to indent, but not both.");if("\n"==this.str[0])return this.advance();if(this.indentStack.length&&n<this.indentStack[0]){for(;this.indentStack.length&&this.indentStack[0]>n;)this.stash.push(new s("outdent")),this.indentStack.shift();o=this.stash.pop()}else n&&n!=this.indentStack[0]?(this.indentStack.unshift(n),o=new s("indent")):o=new s("newline");return o}},unit:function(){var e;if(e=/^(-)?(\d+\.\d+|\d+|\.\d+)(%|[a-zA-Z]+)?[ \t]*/.exec(this.str)){this.skip(e);var t=parseFloat(e[2]);"-"==e[1]&&(t=-t);var o=new i.Unit(t,e[3]);return o.raw=e[0],new s("unit",o)}},string:function(){var e;if(e=/^("[^"]*"|'[^']*')[ \t]*/.exec(this.str)){var t=e[1],o=e[0][0];return this.skip(e),t=t.slice(1,-1).replace(/\\n/g,"\n"),new s("string",new i.String(t,o))}},color:function(){return this.rrggbbaa()||this.rrggbb()||this.rgba()||this.rgb()||this.nn()||this.n()},n:function(){var e;if(e=/^#([a-fA-F0-9]{1})[ \t]*/.exec(this.str)){this.skip(e);var t=parseInt(e[1]+e[1],16),o=new i.RGBA(t,t,t,1);return o.raw=e[0],new s("color",o)}},nn:function(){var e;if(e=/^#([a-fA-F0-9]{2})[ \t]*/.exec(this.str)){this.skip(e);var t=parseInt(e[1],16),o=new i.RGBA(t,t,t,1);return o.raw=e[0],new s("color",o)}},rgb:function(){var e;if(e=/^#([a-fA-F0-9]{3})[ \t]*/.exec(this.str)){this.skip(e);var t=e[1],o=parseInt(t[0]+t[0],16),n=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16),a=new i.RGBA(o,n,r,1);return a.raw=e[0],new s("color",a)}},rgba:function(){var e;if(e=/^#([a-fA-F0-9]{4})[ \t]*/.exec(this.str)){this.skip(e);var t=e[1],o=parseInt(t[0]+t[0],16),n=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16),l=parseInt(t[3]+t[3],16),a=new i.RGBA(o,n,r,l/255);return a.raw=e[0],new s("color",a)}},rrggbb:function(){var e;if(e=/^#([a-fA-F0-9]{6})[ \t]*/.exec(this.str)){this.skip(e);var t=e[1],o=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),r=parseInt(t.substr(4,2),16),a=new i.RGBA(o,n,r,1);return a.raw=e[0],new s("color",a)}},rrggbbaa:function(){var e;if(e=/^#([a-fA-F0-9]{8})[ \t]*/.exec(this.str)){this.skip(e);var t=e[1],o=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),r=parseInt(t.substr(4,2),16),l=parseInt(t.substr(6,2),16),a=new i.RGBA(o,n,r,l/255);return a.raw=e[0],new s("color",a)}},selector:function(){var e;if(e=/^\^|.*?(?=\/\/(?![^\[]*\])|[,\n{])/.exec(this.str)){var t=e[0];return this.skip(e),new s("selector",t)}}}}),e.register("nodes/arguments.js",function(e,t,o){var n=o("./node"),r=o("../nodes"),s=o("../utils"),a=e.exports=function(){r.Expression.call(this),this.map={}};a.prototype.__proto__=r.Expression.prototype,a.fromExpression=function(e){var t=new a,o=e.nodes.length;t.lineno=e.lineno,t.column=e.column,t.isList=e.isList;for(var n=0;n<o;++n)t.push(e.nodes[n]);return t},a.prototype.clone=function(e){var t=r.Expression.prototype.clone.call(this,e);for(var o in t.map={},this.map)t.map[o]=this.map[o].clone(e,t);return t.isList=this.isList,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},a.prototype.toJSON=function(){return{__type:"Arguments",map:this.map,isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),e.register("nodes/binop.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t,o){n.call(this),this.op=e,this.left=t,this.right=o};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r(this.op);return t.left=this.left.clone(e,t),t.right=this.right&&this.right.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,this.val&&(t.val=this.val.clone(e,t)),t},r.prototype.toString=function(){return this.left.toString()+" "+this.op+" "+this.right.toString()},r.prototype.toJSON=function(){var e={__type:"BinOp",left:this.left,right:this.right,op:this.op,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(e.val=this.val),e}}),e.register("nodes/block.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.nodes=[],this.parent=e,this.node=t,this.scope=!0};r.prototype.__proto__=n.prototype,r.prototype.__defineGetter__("hasProperties",function(){for(var e=0,t=this.nodes.length;e<t;++e)if("property"==this.nodes[e].nodeName)return!0}),r.prototype.__defineGetter__("hasMedia",function(){for(var e,t=0,o=this.nodes.length;t<o;++t)if(e=this.nodes[t].nodeName,"media"==e)return!0;return!1}),r.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),r.prototype.clone=function(e,t){e=e||this.parent;var o=new r(e,t||this.node);return o.lineno=this.lineno,o.column=this.column,o.filename=this.filename,o.scope=this.scope,this.nodes.forEach(function(e){o.push(e.clone(o,o))}),o},r.prototype.push=function(e){this.nodes.push(e)},r.prototype.toJSON=function(){return{__type:"Block",scope:this.scope,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),e.register("nodes/boolean.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function e(t){return n.call(this),this.nodeName?void(this.val=!!t):new e(t)};s.prototype.__proto__=n.prototype,s.prototype.toBoolean=function(){return this},s.prototype.__defineGetter__("isTrue",function(){return this.val}),s.prototype.__defineGetter__("isFalse",function(){return!this.val}),s.prototype.negate=function(){return new s(!this.val)},s.prototype.inspect=function(){return"[Boolean "+this.val+"]"},s.prototype.toString=function(){return this.val?"true":"false"},s.prototype.toJSON=function(){return{__type:"Boolean",val:this.val}}}),e.register("nodes/call.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.name=e,this.args=t};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r(this.name);return t.args=this.args.clone(e,t),this.block&&(t.block=this.block.clone(e,t)),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toString=function(){var e=this.args.nodes.map(function(e){var t=e.toString();return t.slice(1,t.length-1)}).join(", ");return this.name+"("+e+")"},r.prototype.toJSON=function(){var e={__type:"Call",name:this.name,args:this.args,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(e.block=this.block),e}}),e.register("nodes/charset.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e){n.call(this),this.val=e};r.prototype.__proto__=n.prototype,r.prototype.toString=function(){return"@charset "+this.val},r.prototype.toJSON=function(){return{__type:"Charset",val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/namespace.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.val=e,this.prefix=t};r.prototype.__proto__=n.prototype,r.prototype.toString=function(){return"@namespace "+(this.prefix?this.prefix+" ":"")+this.val},r.prototype.toJSON=function(){return{__type:"Namespace",val:this.val,prefix:this.prefix,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/comment.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t,o){n.call(this),this.str=e,this.suppress=t,this.inline=o};r.prototype.__proto__=n.prototype,r.prototype.toJSON=function(){return{__type:"Comment",str:this.str,suppress:this.suppress,inline:this.inline,lineno:this.lineno,column:this.column,filename:this.filename}},r.prototype.toString=function(){return this.str}}),e.register("nodes/each.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function(e,t,o,r){n.call(this),this.val=e,this.key=t,this.expr=o,this.block=r};s.prototype.__proto__=n.prototype,s.prototype.clone=function(e){var t=new s(this.val,this.key);return t.expr=this.expr.clone(e,t),t.block=this.block.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},s.prototype.toJSON=function(){return{__type:"Each",val:this.val,key:this.key,expr:this.expr,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/expression.js",function(e,t,o){var n=o("./node"),r=o("../nodes"),s=o("../utils"),i=e.exports=function(e){n.call(this),this.nodes=[],this.isList=e};i.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),i.prototype.__defineGetter__("first",function(){return this.nodes[0]?this.nodes[0].first:r.nil}),i.prototype.__defineGetter__("hash",function(){return this.nodes.map(function(e){return e.hash}).join("::")}),i.prototype.__proto__=n.prototype,i.prototype.clone=function(e){var t=new this.constructor(this.isList);return t.preserve=this.preserve,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t.nodes=this.nodes.map(function(o){return o.clone(e,t)}),t},i.prototype.push=function(e){this.nodes.push(e)},i.prototype.operate=function(e,t,o){switch(e){case"[]=":var l,p,c=this,u=s.unwrap(t).nodes,o=s.unwrap(o);return u.forEach(function(e){if(l=c.nodes.length,"unit"==e.nodeName){for(var t=0>e.val?l+e.val:e.val,s=t;t-->l;)c.nodes[t]=r.nil;c.nodes[s]=o}else e.string&&(p=c.nodes[0],p&&"object"==p.nodeName&&p.set(e.string,o.clone()))}),o;case"[]":var p,d=new r.Expression,m=s.unwrap(this).nodes,u=s.unwrap(t).nodes;return u.forEach(function(e){"unit"==e.nodeName?p=m[0>e.val?m.length+e.val:e.val]:"object"==m[0].nodeName&&(p=m[0].get(e.string)),p&&d.push(p)}),d.isEmpty?r.nil:s.unwrap(d);case"||":return this.toBoolean().isTrue?this:t;case"in":return n.prototype.operate.call(this,e,t);case"!=":return this.operate("==",t,o).negate();case"==":var g,h,l=this.nodes.length,t=t.toExpression();if(l!=t.nodes.length)return r.no;for(var y=0;y<l;++y)if(g=this.nodes[y],h=t.nodes[y],!g.operate(e,h).isTrue)return r.no;return r.yes;break;default:return this.first.operate(e,t,o);}},i.prototype.toBoolean=function(){return 1<this.nodes.length?r.yes:this.first.toBoolean()},i.prototype.toString=function(){return"("+this.nodes.map(function(e){return e.toString()}).join(this.isList?", ":" ")+")"},i.prototype.toJSON=function(){return{__type:"Expression",isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),e.register("nodes/function.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t,o){n.call(this),this.name=e,this.params=t,this.block=o,"function"==typeof t&&(this.fn=t)};r.prototype.__defineGetter__("arity",function(){return this.params.length}),r.prototype.__proto__=n.prototype,r.prototype.__defineGetter__("hash",function(){return"function "+this.name}),r.prototype.clone=function(e){if(this.fn)var t=new r(this.name,this.fn);else{var t=new r(this.name);t.params=this.params.clone(e,t),t.block=this.block.clone(e,t)}return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toString=function(){return this.fn?this.name+"("+this.fn.toString().match(/^function *\w*\((.*?)\)/).slice(1).join(", ")+")":this.name+"("+this.params.nodes.join(", ")+")"},r.prototype.toJSON=function(){var e={__type:"Function",name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.fn?e.fn=this.fn:(e.params=this.params,e.block=this.block),e}}),e.register("nodes/group.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){n.call(this),this.nodes=[],this.extends=[]};r.prototype.__proto__=n.prototype,r.prototype.push=function(e){this.nodes.push(e)},r.prototype.__defineGetter__("block",function(){return this.nodes[0].block}),r.prototype.__defineSetter__("block",function(e){for(var t=0,o=this.nodes.length;t<o;++t)this.nodes[t].block=e}),r.prototype.__defineGetter__("hasOnlyPlaceholders",function(){return this.nodes.every(function(e){return e.isPlaceholder})}),r.prototype.clone=function(e){var t=new r;return t.lineno=this.lineno,t.column=this.column,this.nodes.forEach(function(o){t.push(o.clone(e,t))}),t.filename=this.filename,t.block=this.block.clone(e,t),t},r.prototype.toJSON=function(){return{__type:"Group",nodes:this.nodes,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/hsla.js",function(e,t,o){function n(e){return e%=360,0<=e?e:360+e}function r(e){return Math.max(0,Math.min(e,100))}function i(e){return Math.max(0,Math.min(e,1))}var p=o("./node"),c=o("./index"),u=t=e.exports=function(e,t,o,s){p.call(this),this.h=n(e),this.s=r(t),this.l=r(o),this.a=i(s),this.hsla=this};u.prototype.__proto__=p.prototype,u.prototype.toString=function(){return"hsla("+this.h+","+this.s.toFixed(0)+"%,"+this.l.toFixed(0)+"%,"+this.a+")"},u.prototype.clone=function(){var e=new u(this.h,this.s,this.l,this.a);return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},u.prototype.toJSON=function(){return{__type:"HSLA",h:this.h,s:this.s,l:this.l,a:this.a,lineno:this.lineno,column:this.column,filename:this.filename}},u.prototype.__defineGetter__("rgba",function(){return c.RGBA.fromHSLA(this)}),u.prototype.__defineGetter__("hash",function(){return this.rgba.toString()}),u.prototype.add=function(e,t,o){return new u(this.h+e,this.s+t,this.l+o,this.a)},u.prototype.sub=function(e,t,o){return this.add(-e,-t,-o)},u.prototype.operate=function(e,t){return"=="===e||"!="===e||"<="===e||">="===e||"<"===e||">"===e||"is a"===e||"||"===e||"&&"===e?this.rgba.operate(e,t):this.rgba.operate(e,t).hsla},t.fromRGBA=function(e){var t,o,n=e.r/255,r=e.g/255,i=e.b/255,p=e.a,a=Math.min(n,r,i),c=Math.max(n,r,i),m=(c+a)/2,g=c-a;return c===a?t=0:c===n?t=60*(r-i)/g:c===r?t=60*(i-n)/g+120:c===i?t=60*(n-r)/g+240:void 0,o=c==a?0:.5>m?g/(2*m):g/(2-2*m),t%=360,o*=100,m*=100,new u(t,o,m,p)},u.prototype.adjustLightness=function(e){return this.l=r(this.l+this.l*(e/100)),this},u.prototype.adjustHue=function(e){return this.h=n(this.h+e),this}}),e.register("nodes/ident.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function(e,t,o){n.call(this),this.name=e,this.string=e,this.val=t||r.nil,this.mixin=!!o};s.prototype.__defineGetter__("isEmpty",function(){return null==this.val}),s.prototype.__defineGetter__("hash",function(){return this.name}),s.prototype.__proto__=n.prototype,s.prototype.clone=function(e){var t=new s(this.name);return t.val=this.val.clone(e,t),t.mixin=this.mixin,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t.property=this.property,t.rest=this.rest,t},s.prototype.toJSON=function(){return{__type:"Ident",name:this.name,val:this.val,mixin:this.mixin,property:this.property,rest:this.rest,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){return this.name},s.prototype.coerce=function(e){switch(e.nodeName){case"ident":case"string":case"literal":return new s(e.string);case"unit":return new s(e.toString());default:return n.prototype.coerce.call(this,e);}},s.prototype.operate=function(e,t){var o=t.first;switch(e){case"-":if("unit"==o.nodeName){var s=new r.Expression;return o=o.clone(),o.val=-o.val,s.push(this),s.push(o),s}case"+":return new r.Ident(this.string+this.coerce(o).string);}return n.prototype.operate.call(this,e,t)}}),e.register("nodes/if.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.cond=e,this.elses=[],t&&t.nodeName?this.block=t:this.negate=t};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.cond=this.cond.clone(e,t),t.block=this.block.clone(e,t),t.elses=this.elses.map(function(o){return o.clone(e,t)}),t.negate=this.negate,t.postfix=this.postfix,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"If",cond:this.cond,block:this.block,elses:this.elses,negate:this.negate,postfix:this.postfix,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/import.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.path=e,this.once=t||!1};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.path=this.path.nodeName?this.path.clone(e,t):this.path,t.once=this.once,t.mtime=this.mtime,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"Import",path:this.path,once:this.once,mtime:this.mtime,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/extend.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e){n.call(this),this.selectors=e};r.prototype.__proto__=n.prototype,r.prototype.clone=function(){return new r(this.selectors)},r.prototype.toString=function(){return"@extend "+this.selectors.join(", ")},r.prototype.toJSON=function(){return{__type:"Extend",selectors:this.selectors,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/index.js",function(e,t,o){t.Node=o("./node"),t.Root=o("./root"),t.Null=o("./null"),t.Each=o("./each"),t.If=o("./if"),t.Call=o("./call"),t.UnaryOp=o("./unaryop"),t.BinOp=o("./binop"),t.Ternary=o("./ternary"),t.Block=o("./block"),t.Unit=o("./unit"),t.String=o("./string"),t.HSLA=o("./hsla"),t.RGBA=o("./rgba"),t.Ident=o("./ident"),t.Group=o("./group"),t.Literal=o("./literal"),t.Boolean=o("./boolean"),t.Return=o("./return"),t.Media=o("./media"),t.QueryList=o("./query-list"),t.Query=o("./query"),t.Feature=o("./feature"),t.Params=o("./params"),t.Comment=o("./comment"),t.Keyframes=o("./keyframes"),t.Member=o("./member"),t.Charset=o("./charset"),t.Namespace=o("./namespace"),t.Import=o("./import"),t.Extend=o("./extend"),t.Object=o("./object"),t.Function=o("./function"),t.Property=o("./property"),t.Selector=o("./selector"),t.Expression=o("./expression"),t.Arguments=o("./arguments"),t.Atblock=o("./atblock"),t.Atrule=o("./atrule"),t.Supports=o("./supports"),t.yes=new t.Boolean(!0),t.no=new t.Boolean(!1),t.nil=new t.Null}),e.register("nodes/keyframes.js",function(e,t,o){var n=o("./atrule"),r=e.exports=function(e,t){n.call(this,"keyframes"),this.segments=e,this.prefix=t||"official"};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t.segments=this.segments.map(function(o){return o.clone(e,t)}),t.prefix=this.prefix,t.block=this.block.clone(e,t),t},r.prototype.toJSON=function(){return{__type:"Keyframes",segments:this.segments,prefix:this.prefix,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},r.prototype.toString=function(){return"@keyframes "+this.segments.join("")}}),e.register("nodes/literal.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function(e){n.call(this),this.val=e,this.string=e,this.prefixed=!1};s.prototype.__proto__=n.prototype,s.prototype.__defineGetter__("hash",function(){return this.val}),s.prototype.toString=function(){return this.val},s.prototype.coerce=function(e){switch(e.nodeName){case"ident":case"string":case"literal":return new s(e.string);default:return n.prototype.coerce.call(this,e);}},s.prototype.operate=function(e,t){var o=t.first;return"+"===e?new r.Literal(this.string+this.coerce(o).string):n.prototype.operate.call(this,e,t)},s.prototype.toJSON=function(){return{__type:"Literal",val:this.val,string:this.string,prefixed:this.prefixed,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/media.js",function(e,t,o){var n=o("./atrule"),r=e.exports=function(e){n.call(this,"media"),this.val=e};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.val=this.val.clone(e,t),t.block=this.block.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"Media",val:this.val,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},r.prototype.toString=function(){return"@media "+this.val}}),e.register("nodes/query-list.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){n.call(this),this.nodes=[]};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;t.lineno=this.lineno,t.column=this.column,t.filename=this.filename;for(var o=0;o<this.nodes.length;++o)t.push(this.nodes[o].clone(e,t));return t},r.prototype.push=function(e){this.nodes.push(e)},r.prototype.merge=function(e){var t,o=new r;return this.nodes.forEach(function(n){for(var r=0,s=e.nodes.length;r<s;++r)t=n.merge(e.nodes[r]),t&&o.push(t)}),o},r.prototype.toString=function(){return"("+this.nodes.map(function(e){return e.toString()}).join(", ")+")"},r.prototype.toJSON=function(){return{__type:"QueryList",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/query.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){n.call(this),this.nodes=[],this.type="",this.predicate=""};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;t.predicate=this.predicate,t.type=this.type;for(var o=0,n=this.nodes.length;o<n;++o)t.push(this.nodes[o].clone(e,t));return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.push=function(e){this.nodes.push(e)},r.prototype.__defineGetter__("resolvedType",function(){if(this.type)return this.type.nodeName?this.type.string:this.type}),r.prototype.__defineGetter__("resolvedPredicate",function(){if(this.predicate)return this.predicate.nodeName?this.predicate.string:this.predicate}),r.prototype.merge=function(e){var t,o,n=new r,s=this.resolvedPredicate,i=e.resolvedPredicate,a=this.resolvedType,l=e.resolvedType;if(a=a||l,l=l||a,"not"==s^"not"==i){if(a==l)return;t="not"==s?l:a,o="not"==s?i:s}else if("not"==s&&"not"==i){if(a!=l)return;t=a,o="not"}else{if(a!=l)return;t=a,o=s||i}return n.predicate=o,n.type=t,n.nodes=this.nodes.concat(e.nodes),n},r.prototype.toString=function(){var e=this.predicate?this.predicate+" ":"",t=this.type||"",o=this.nodes.length,n=e+t;return o&&(n+=(t&&" and ")+this.nodes.map(function(e){return e.toString()}).join(" and ")),n},r.prototype.toJSON=function(){return{__type:"Query",predicate:this.predicate,type:this.type,nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/feature.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e){n.call(this),this.segments=e,this.expr=null};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.segments=this.segments.map(function(o){return o.clone(e,t)}),this.expr&&(t.expr=this.expr.clone(e,t)),this.name&&(t.name=this.name),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toString=function(){return this.expr?"("+this.segments.join("")+": "+this.expr.toString()+")":this.segments.join("")},r.prototype.toJSON=function(){var e={__type:"Feature",segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(e.expr=this.expr),this.name&&(e.name=this.name),e}}),e.register("nodes/node.js",function(e,t,o){function n(e){this.name="CoercionError",this.message=e,Error.captureStackTrace(this,n)}var r=o("../visitor/evaluator"),s=o("../utils"),l=o("./index");n.prototype.__proto__=Error.prototype;var p=e.exports=function(){this.lineno=l.lineno||1,this.column=l.column||1,this.filename=l.filename};p.prototype={constructor:p,get first(){return this},get hash(){return this.val},get nodeName(){return this.constructor.name.toLowerCase()},clone:function(){return this},toJSON:function(){return{lineno:this.lineno,column:this.column,filename:this.filename}},eval:function(){return new r(this).evaluate()},toBoolean:function(){return l.yes},toExpression:function(){if("expression"==this.nodeName)return this;var e=new l.Expression;return e.push(this),e},shouldCoerce:function(e){return"is a"!==e&&"in"!==e&&"||"!==e&&"&&"!==e},operate:function(e,t){switch(e){case"is a":if("string"==t.first.nodeName)return l.Boolean(this.nodeName==t.val);throw new Error("\"is a\" expects a string, got "+t.toString());case"==":return l.Boolean(this.hash==t.hash);case"!=":return l.Boolean(this.hash!=t.hash);case">=":return l.Boolean(this.hash>=t.hash);case"<=":return l.Boolean(this.hash<=t.hash);case">":return l.Boolean(this.hash>t.hash);case"<":return l.Boolean(this.hash<t.hash);case"||":return this.toBoolean().isTrue?this:t;case"in":var o=s.unwrap(t).nodes,n=o&&o.length,r=this.hash;if(!o)throw new Error("\"in\" given invalid right-hand operand, expecting an expression");if(1==n&&"object"==o[0].nodeName)return l.Boolean(o[0].has(this.hash));for(var p=0;p<n;++p)if(r==o[p].hash)return l.yes;return l.no;case"&&":var c=this.toBoolean(),a=t.toBoolean();return c.isTrue&&a.isTrue?t:c.isFalse?this:t;default:if("[]"==e)var u="cannot perform "+this+"["+t+"]";else var u="cannot perform "+this+" "+e+" "+t;throw new Error(u);}},coerce:function(e){if(e.nodeName==this.nodeName)return e;throw new n("cannot coerce "+e+" to "+this.nodeName)}}}),e.register("nodes/null.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function(){};s.prototype.__proto__=n.prototype,s.prototype.inspect=s.prototype.toString=function(){return"null"},s.prototype.toBoolean=function(){return r.no},s.prototype.__defineGetter__("isNull",function(){return!0}),s.prototype.__defineGetter__("hash",function(){return null}),s.prototype.toJSON=function(){return{__type:"Null",lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/params.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){n.call(this),this.nodes=[]};r.prototype.__defineGetter__("length",function(){return this.nodes.length}),r.prototype.__proto__=n.prototype,r.prototype.push=function(e){this.nodes.push(e)},r.prototype.clone=function(e){var t=new r;return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,this.nodes.forEach(function(o){t.push(o.clone(e,t))}),t},r.prototype.toJSON=function(){return{__type:"Params",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/property.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.segments=e,this.expr=t};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r(this.segments);return t.name=this.name,this.literal&&(t.literal=this.literal),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t.segments=this.segments.map(function(o){return o.clone(e,t)}),this.expr&&(t.expr=this.expr.clone(e,t)),t},r.prototype.toJSON=function(){var e={__type:"Property",segments:this.segments,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(e.expr=this.expr),this.literal&&(e.literal=this.literal),e},r.prototype.toString=function(){return"property("+this.segments.join("")+", "+this.expr+")"},r.prototype.operate=function(e,t,o){return this.expr.operate(e,t,o)}}),e.register("nodes/return.js",function(e,t,o){var n=o("./node"),r=o("./index"),s=e.exports=function(e){this.expr=e||r.nil};s.prototype.__proto__=n.prototype,s.prototype.clone=function(e){var t=new s;return t.expr=this.expr.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},s.prototype.toJSON=function(){return{__type:"Return",expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/rgba.js",function(e,t,o){function n(e){return Math.max(0,Math.min(e.toFixed(0),255))}function s(e){return Math.max(0,Math.min(e,1))}var i=o("./node"),a=o("./hsla"),l=o("../functions"),p=l.adjust,c=o("./index"),u=t=e.exports=function(e,t,o,r){i.call(this),this.r=n(e),this.g=n(t),this.b=n(o),this.a=s(r),this.name="",this.rgba=this};u.prototype.__proto__=i.prototype,u.withoutClamping=function(e,t,o,n){var r=new u(0,0,0,0);return r.r=e,r.g=t,r.b=o,r.a=n,r},u.prototype.clone=function(){var e=new u(this.r,this.g,this.b,this.a);return e.raw=this.raw,e.name=this.name,e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},u.prototype.toJSON=function(){return{__type:"RGBA",r:this.r,g:this.g,b:this.b,a:this.a,raw:this.raw,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename}},u.prototype.toBoolean=function(){return c.yes},u.prototype.__defineGetter__("hsla",function(){return a.fromRGBA(this)}),u.prototype.__defineGetter__("hash",function(){return this.toString()}),u.prototype.add=function(e,t,o,n){return new u(this.r+e,this.g+t,this.b+o,this.a+n)},u.prototype.sub=function(e,t,o,n){return new u(this.r-e,this.g-t,this.b-o,1==n?this.a:this.a-n)},u.prototype.multiply=function(e){return new u(this.r*e,this.g*e,this.b*e,this.a)},u.prototype.divide=function(e){return new u(this.r/e,this.g/e,this.b/e,this.a)},u.prototype.operate=function(e,t){switch("in"!=e&&(t=t.first),e){case"is a":if("string"==t.nodeName&&"color"==t.string)return c.yes;break;case"+":switch(t.nodeName){case"unit":var o=t.val;switch(t.type){case"%":return p(this,new c.String("lightness"),t);case"deg":return this.hsla.adjustHue(o).rgba;default:return this.add(o,o,o,0);}case"rgba":return this.add(t.r,t.g,t.b,t.a);case"hsla":return this.hsla.add(t.h,t.s,t.l);}break;case"-":switch(t.nodeName){case"unit":var o=t.val;switch(t.type){case"%":return p(this,new c.String("lightness"),new c.Unit(-o,"%"));case"deg":return this.hsla.adjustHue(-o).rgba;default:return this.sub(o,o,o,0);}case"rgba":return this.sub(t.r,t.g,t.b,t.a);case"hsla":return this.hsla.sub(t.h,t.s,t.l);}break;case"*":switch(t.nodeName){case"unit":return this.multiply(t.val);}break;case"/":switch(t.nodeName){case"unit":return this.divide(t.val);}}return i.prototype.operate.call(this,e,t)},u.prototype.toString=function(){function e(e){return 16>e?"0"+e.toString(16):e.toString(16)}if("transparent"==this.name)return this.name;if(1==this.a){var t=e(this.r),o=e(this.g),n=e(this.b);return t[0]==t[1]&&o[0]==o[1]&&n[0]==n[1]?"#"+t[0]+o[0]+n[0]:"#"+t+o+n}return"rgba("+this.r+","+this.g+","+this.b+","+ +this.a.toFixed(3)+")"},t.fromHSLA=function(e){function t(e){return 0>e&&++e,1<e&&--e,1>6*e?l+6*((a-l)*e):1>2*e?a:2>3*e?l+6*((a-l)*(2/3-e)):l}var o=e.h/360,n=e.s/100,s=e.l/100,i=e.a,a=.5>=s?s*(n+1):s+n-s*n,l=2*s-a,p=255*t(o+1/3),r=255*t(o),c=255*t(o-1/3);return new u(p,r,c,i)}}),e.register("nodes/root.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){this.nodes=[]};r.prototype.__proto__=n.prototype,r.prototype.push=function(e){this.nodes.push(e)},r.prototype.unshift=function(e){this.nodes.unshift(e)},r.prototype.clone=function(){var e=new r;return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,this.nodes.forEach(function(t){e.push(t.clone(e,e))}),e},r.prototype.toString=function(){return"[Root]"},r.prototype.toJSON=function(){return{__type:"Root",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/selector.js",function(e,t,o){var n=o("./block"),r=o("./node"),s=e.exports=function(e){r.call(this),this.inherits=!0,this.segments=e,this.optional=!1};s.prototype.__proto__=r.prototype,s.prototype.toString=function(){return this.segments.join("")+(this.optional?" !optional":"")},s.prototype.__defineGetter__("isPlaceholder",function(){return this.val&&~this.val.substr(0,2).indexOf("$")}),s.prototype.clone=function(e){var t=new s;return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t.inherits=this.inherits,t.val=this.val,t.segments=this.segments.map(function(o){return o.clone(e,t)}),t.optional=this.optional,t},s.prototype.toJSON=function(){return{__type:"Selector",inherits:this.inherits,segments:this.segments,optional:this.optional,val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/string.js",function(e,t,o){var n=o("./node"),r=o("../functions").s,s=o("../utils"),i=o("./index"),a=e.exports=function(e,t){n.call(this),this.val=e,this.string=e,this.prefixed=!1,this.quote="string"==typeof t?t:"'"};a.prototype.__proto__=n.prototype,a.prototype.toString=function(){return this.quote+this.val+this.quote},a.prototype.clone=function(){var e=new a(this.val,this.quote);return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},a.prototype.toJSON=function(){return{__type:"String",val:this.val,quote:this.quote,lineno:this.lineno,column:this.column,filename:this.filename}},a.prototype.toBoolean=function(){return i.Boolean(this.val.length)},a.prototype.coerce=function(e){switch(e.nodeName){case"string":return e;case"expression":return new a(e.nodes.map(function(e){return this.coerce(e).val},this).join(" "));default:return new a(e.toString());}},a.prototype.operate=function(e,t){switch(e){case"%":var o=new i.Expression;o.push(this);var l="expression"==t.nodeName?s.unwrap(t).nodes:[t];return r.apply(null,[o].concat(l));case"+":var o=new i.Expression;return o.push(new a(this.val+this.coerce(t).val)),o;default:return n.prototype.operate.call(this,e,t);}}}),e.register("nodes/ternary.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t,o){n.call(this),this.cond=e,this.trueExpr=t,this.falseExpr=o};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.cond=this.cond.clone(e,t),t.trueExpr=this.trueExpr.clone(e,t),t.falseExpr=this.falseExpr.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"Ternary",cond:this.cond,trueExpr:this.trueExpr,falseExpr:this.falseExpr,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/unaryop.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.op=e,this.expr=t};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r(this.op);return t.expr=this.expr.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"UnaryOp",op:this.op,expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),e.register("nodes/unit.js",function(e,t,o){var n=o("./node"),r=o("./index"),s={mm:{val:1,label:"mm"},cm:{val:10,label:"mm"},in:{val:25.4,label:"mm"},pt:{val:25.4/72,label:"mm"},ms:{val:1,label:"ms"},s:{val:1e3,label:"ms"},Hz:{val:1,label:"Hz"},kHz:{val:1e3,label:"Hz"}},i=e.exports=function(e,t){n.call(this),this.val=e,this.type=t};i.prototype.__proto__=n.prototype,i.prototype.toBoolean=function(){return r.Boolean(!!this.type||this.val)},i.prototype.toString=function(){return this.val+(this.type||"")},i.prototype.clone=function(){var e=new i(this.val,this.type);return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},i.prototype.toJSON=function(){return{__type:"Unit",val:this.val,type:this.type,lineno:this.lineno,column:this.column,filename:this.filename}},i.prototype.operate=function(e,t){var o=this.type||t.first.type;if("rgba"==t.nodeName||"hsla"==t.nodeName)return t.operate(e,this);if(this.shouldCoerce(e))switch(t=t.first,t="%"!=this.type&&("-"==e||"+"==e)&&"%"==t.type?new i(this.val*(t.val/100),"%"):this.coerce(t),e){case"-":return new i(this.val-t.val,o);case"+":return o=o||"%"==t.type&&t.type,new i(this.val+t.val,o);case"/":return new i(this.val/t.val,o);case"*":return new i(this.val*t.val,o);case"%":return new i(this.val%t.val,o);case"**":return new i(Math.pow(this.val,t.val),o);case"..":case"...":var s=this.val,a=t.val,l=new r.Expression,p=".."==e;if(s<a)do l.push(new r.Unit(s));while(p?++s<=a:++s<a);else do l.push(new r.Unit(s));while(p?--s>=a:--s>a);return l;}return n.prototype.operate.call(this,e,t)},i.prototype.coerce=function(e){if("unit"==e.nodeName){var t=this,o=e,i=s[t.type],a=s[o.type];if(i&&a&&i.label==a.label){var l=o.val*(a.val/i.val);return new r.Unit(l,t.type)}return new r.Unit(o.val,t.type)}if("string"==e.nodeName){if("%"==e.val)return new r.Unit(0,"%");var p=parseFloat(e.val);return isNaN(p)&&n.prototype.coerce.call(this,e),new r.Unit(p)}return n.prototype.coerce.call(this,e)}}),e.register("nodes/object.js",function(e,t,o){var n=o("./node"),r=o("./index"),s={}.constructor,i=e.exports=function(){n.call(this),this.vals={}};i.prototype.__proto__=n.prototype,i.prototype.set=function(e,t){return this.vals[e]=t,this},i.prototype.__defineGetter__("length",function(){return s.keys(this.vals).length}),i.prototype.get=function(e){return this.vals[e]||r.nil},i.prototype.has=function(e){return e in this.vals},i.prototype.operate=function(e,t){switch(e){case".":case"[]":return this.get(t.hash);case"==":var o,s,i=this.vals;if("object"!=t.nodeName||this.length!=t.length)return r.no;for(var l in i)if(o=i[l],s=t.vals[l],o.operate(e,s).isFalse)return r.no;return r.yes;case"!=":return this.operate("==",t).negate();default:return n.prototype.operate.call(this,e,t);}},i.prototype.toBoolean=function(){return r.Boolean(this.length)},i.prototype.toBlock=function(){function e(t){return t.nodes?t.nodes.map(e).join(t.isList?",":" "):"literal"==t.nodeName&&","==t.val?"\\,":t.toString()}var t,o,n="{";for(t in this.vals)o=this.get(t),n+="object"==o.first.nodeName?t+" "+o.first.toBlock():"@charset"===t?t+" "+o.first.toString()+";":t+":"+e(o)+";";return n+="}",n},i.prototype.clone=function(e){var t={};for(var o in t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,this.vals)t.vals[o]=this.vals[o].clone(e,t);return t},i.prototype.toJSON=function(){return{__type:"Object",vals:this.vals,lineno:this.lineno,column:this.column,filename:this.filename}},i.prototype.toString=function(){var e={};for(var t in this.vals)e[t]=this.vals[t].toString();return JSON.stringify(e)}}),e.register("nodes/supports.js",function(e,t,o){var n=o("./atrule"),r=e.exports=function(e){n.call(this,"supports"),this.condition=e};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.condition=this.condition.clone(e,t),t.block=this.block.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){return{__type:"Supports",condition:this.condition,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},r.prototype.toString=function(){return"@supports "+this.condition}}),e.register("nodes/member.js",function(e,t,o){var n=o("./node"),r=e.exports=function(e,t){n.call(this),this.left=e,this.right=t};r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.left=this.left.clone(e,t),t.right=this.right.clone(e,t),this.val&&(t.val=this.val.clone(e,t)),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toJSON=function(){var e={__type:"Member",left:this.left,right:this.right,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(e.val=this.val),e},r.prototype.toString=function(){return this.left.toString()+"."+this.right.toString()}}),e.register("nodes/atblock.js",function(e,t,o){var n=o("./node"),r=e.exports=function(){n.call(this)};r.prototype.__defineGetter__("nodes",function(){return this.block.nodes}),r.prototype.__proto__=n.prototype,r.prototype.clone=function(e){var t=new r;return t.block=this.block.clone(e,t),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},r.prototype.toString=function(){return"@block"},r.prototype.toJSON=function(){return{__type:"Atblock",block:this.block,lineno:this.lineno,column:this.column,fileno:this.fileno}}}),e.register("nodes/atrule.js",function(e,t,o){function n(e){var t=e.nodes;return!t.every(function(e){return"group"==e.nodeName&&e.hasOnlyPlaceholders})&&t.some(function(e){switch(e.nodeName){case"property":case"literal":case"import":return!0;case"block":return n(e);default:if(e.block)return n(e.block);}})}var r=o("./node"),s=e.exports=function(e){r.call(this),this.type=e};s.prototype.__proto__=r.prototype,s.prototype.__defineGetter__("hasOnlyProperties",function(){if(!this.block)return!1;for(var e,t=this.block.nodes,o=0,n=t.length;o<n;++o)switch(e=t[o].nodeName,t[o].nodeName){case"property":case"expression":case"comment":continue;default:return!1;}return!0}),s.prototype.clone=function(e){var t=new s(this.type);return this.block&&(t.block=this.block.clone(e,t)),t.segments=this.segments.map(function(o){return o.clone(e,t)}),t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},s.prototype.toJSON=function(){var e={__type:"Atrule",type:this.type,segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(e.block=this.block),e},s.prototype.toString=function(){return"@"+this.type},s.prototype.__defineGetter__("hasOutput",function(){return!!this.block&&n(this.block)})}),e.register("parser.js",function(e,t,o){var n=o("./lexer"),r=o("./nodes"),s=o("./token"),i=o("./units"),a=o("./errors"),l=["ident","string","selector","function","comment","boolean","space","color","unit","for","in","[","]","(",")","+","-","*","*=","<",">","=",":","&","&&","~","{","}",".","..","/"],p=["matches","not","dir","lang","any-link","link","visited","local-link","target","scope","hover","active","focus","drop","current","past","future","enabled","disabled","read-only","read-write","placeholder-shown","checked","indeterminate","valid","invalid","in-range","out-of-range","required","optional","user-error","root","empty","blank","nth-child","nth-last-child","first-child","last-child","only-child","nth-of-type","nth-last-of-type","first-of-type","last-of-type","only-of-type","nth-match","nth-last-match","nth-column","nth-last-column","first-line","first-letter","before","after","selection"],c=e.exports=function(e,t){var o=this;t=t||{},this.lexer=new n(e,t),this.prefix=t.prefix||"",this.root=t.root||new r.Root,this.state=["root"],this.stash=[],this.parens=0,this.css=0,this.state.pop=function(){o.prevState=[].pop.call(this)}};c.prototype={constructor:c,currentState:function(){return this.state[this.state.length-1]},previousState:function(){return this.state[this.state.length-2]},parse:function(){for(var e,t=this.parent=this.root;"eos"!=this.peek().type&&(this.skipWhitespace(),"eos"!=this.peek().type);)e=this.statement(),this.accept(";"),e||this.error("unexpected token {peek}, not allowed at the root level"),t.push(e);return t},error:function(e){var t=this.peek().type,o=null==this.peek().val?"":" "+this.peek().toString();throw o.trim()==t.trim()&&(o=""),new a.ParseError(e.replace("{peek}","\""+t+o+"\""))},accept:function(e){if(e==this.peek().type)return this.next()},expect:function(e){return e!=this.peek().type&&this.error("expected \""+e+"\", got {peek}"),this.next()},next:function(){var e=this.stash.length?this.stash.pop():this.lexer.next(),t=e.lineno,o=e.column||1;return e.val&&e.val.nodeName&&(e.val.lineno=t,e.val.column=o),r.lineno=t,r.column=o,e},peek:function(){return this.lexer.peek()},lookahead:function(e){return this.lexer.lookahead(e)},isSelectorToken:function(e){var t=this.lookahead(e).type;return"for"===t?this.bracketed:"["===t?(this.bracketed=!0,!0):"]"===t?(this.bracketed=!1,!0):~l.indexOf(t)},isPseudoSelector:function(e){var t=this.lookahead(e).val;return t&&~p.indexOf(t.name)},lineContains:function(e){for(var t,o=1;t=this.lookahead(o++);){if(~["indent","outdent","newline","eos"].indexOf(t.type))return;if(e==t.type)return!0}},selectorToken:function(){if(this.isSelectorToken(1)){if("{"==this.peek().type){if(!this.lineContains("}"))return;for(var e,t=0;e=this.lookahead(++t);){if("}"==e.type){if(2==t||3==t&&"space"==this.lookahead(t-1).type)return;break}if(":"==e.type)return}}return this.next()}},skip:function(e){for(;~e.indexOf(this.peek().type);)this.next()},skipWhitespace:function(){this.skip(["space","indent","outdent","newline"])},skipNewlines:function(){for(;"newline"==this.peek().type;)this.next()},skipSpaces:function(){for(;"space"==this.peek().type;)this.next()},skipSpacesAndComments:function(){for(;"space"==this.peek().type||"comment"==this.peek().type;)this.next()},looksLikeFunctionDefinition:function(e){return"indent"==this.lookahead(e).type||"{"==this.lookahead(e).type},looksLikeSelector:function(e){var t,o=1;if(e&&":"==this.lookahead(o+1).type&&(this.lookahead(o+1).space||"indent"==this.lookahead(o+2).type))return!1;for(;"ident"==this.lookahead(o).type&&("newline"==this.lookahead(o+1).type||","==this.lookahead(o+1).type);)o+=2;for(;this.isSelectorToken(o)||","==this.lookahead(o).type;){if("selector"==this.lookahead(o).type)return!0;if("&"==this.lookahead(o+1).type)return!0;if("."==this.lookahead(o).type&&"ident"==this.lookahead(o+1).type)return!0;if("*"==this.lookahead(o).type&&"newline"==this.lookahead(o+1).type)return!0;if(":"==this.lookahead(o).type&&":"==this.lookahead(o+1).type)return!0;if("color"==this.lookahead(o).type&&"newline"==this.lookahead(o-1).type)return!0;if(this.looksLikeAttributeSelector(o))return!0;if(("="==this.lookahead(o).type||"function"==this.lookahead(o).type)&&"{"==this.lookahead(o+1).type)return!1;if(":"==this.lookahead(o).type&&!this.isPseudoSelector(o+1)&&this.lineContains("."))return!1;if("{"==this.lookahead(o).type?t=!0:"}"==this.lookahead(o).type&&(t=!1),t&&":"==this.lookahead(o).type)return!0;if("space"==this.lookahead(o).type&&"{"==this.lookahead(o+1).type)return!0;if(":"==this.lookahead(o++).type&&!this.lookahead(o-1).space&&this.isPseudoSelector(o))return!0;if("space"==this.lookahead(o).type&&"newline"==this.lookahead(o+1).type&&"{"==this.lookahead(o+2).type)return!0;if(","==this.lookahead(o).type&&"newline"==this.lookahead(o+1).type)return!0}if(","==this.lookahead(o).type&&"newline"==this.lookahead(o+1).type)return!0;if("{"==this.lookahead(o).type&&"newline"==this.lookahead(o+1).type)return!0;if(this.css&&(";"==this.lookahead(o).type||"}"==this.lookahead(o-1).type))return!1;for(;!~["indent","outdent","newline","for","if",";","}","eos"].indexOf(this.lookahead(o).type);)++o;if("indent"==this.lookahead(o).type)return!0},looksLikeAttributeSelector:function(e){var t=this.lookahead(e).type;return!!("="==t&&this.bracketed)||("ident"==t||"string"==t)&&"]"==this.lookahead(e+1).type&&("newline"==this.lookahead(e+2).type||this.isSelectorToken(e+2))&&!this.lineContains(":")&&!this.lineContains("=")},looksLikeKeyframe:function(){var e,t=2;switch(this.lookahead(t).type){case"{":case"indent":case",":return!0;case"newline":for(;"unit"==this.lookahead(++t).type||"newline"==this.lookahead(t).type;);return e=this.lookahead(t).type,"indent"==e||"{"==e;}},stateAllowsSelector:function(){switch(this.currentState()){case"root":case"atblock":case"selector":case"conditional":case"function":case"atrule":case"for":return!0;}},assignAtblock:function(e){try{e.push(this.atblock(e))}catch(e){this.error("invalid right-hand side operand in assignment, got {peek}")}},statement:function(){var e,t,o=this.stmt(),n=this.prevState;switch(this.allowPostfix&&(this.allowPostfix=!1,n="expression"),n){case"assignment":case"expression":case"function arguments":for(;t=this.accept("if")||this.accept("unless")||this.accept("for");)switch(t.type){case"if":case"unless":o=new r.If(this.expression(),o),o.postfix=!0,o.negate="unless"==t.type,this.accept(";");break;case"for":var s,i=this.id().name;this.accept(",")&&(s=this.id().name),this.expect("in");var a=new r.Each(i,s,this.expression());e=new r.Block(this.parent,a),e.push(o),a.block=e,o=a;}}return o},stmt:function(){var e=this.peek().type;switch(e){case"keyframes":return this.keyframes();case"-moz-document":return this.mozdocument();case"comment":case"selector":case"extend":case"literal":case"charset":case"namespace":case"require":case"extend":case"media":case"atrule":case"ident":case"scope":case"supports":case"unless":return this[e]();case"function":return this.fun();case"import":return this.atimport();case"if":return this.ifstmt();case"for":return this.forin();case"return":return this.ret();case"{":return this.property();default:if(this.stateAllowsSelector())switch(e){case"color":case"~":case">":case"<":case":":case"&":case"&&":case"[":case".":case"/":return this.selector();case"..":if("/"==this.lookahead(2).type)return this.selector();case"+":return"function"==this.lookahead(2).type?this.functionCall():this.selector();case"*":return this.property();case"unit":if(this.looksLikeKeyframe())return this.selector();case"-":if("{"==this.lookahead(2).type)return this.property();}var t=this.expression();return t.isEmpty&&this.error("unexpected {peek}"),t;}},block:function(e,t){var o,n,s,i=this.parent=new r.Block(this.parent,e);for(!1===t&&(i.scope=!1),this.accept("newline"),this.accept("{")?(this.css++,o="}",this.skipWhitespace()):(o="outdent",this.expect("indent"));o!=this.peek().type;){if(this.css){if(this.accept("newline")||this.accept("indent"))continue;n=this.statement(),this.accept(";"),this.skipWhitespace()}else{if(this.accept("newline"))continue;if(s=this.lookahead(2).type,"indent"==this.peek().type&&~["outdent","newline","comment"].indexOf(s)){this.skip(["indent","outdent"]);continue}if("eos"==this.peek().type)return i;n=this.statement(),this.accept(";")}n||this.error("unexpected token {peek} in block"),i.push(n)}return this.css?(this.skipWhitespace(),this.expect("}"),this.skipSpaces(),this.css--):this.expect("outdent"),this.parent=i.parent,i},comment:function(){var e=this.next().val;return this.skipSpaces(),e},forin:function(){this.expect("for");var e,t=this.id().name;this.accept(",")&&(e=this.id().name),this.expect("in"),this.state.push("for"),this.cond=!0;var o=new r.Each(t,e,this.expression());return this.cond=!1,o.block=this.block(o,!1),this.state.pop(),o},ret:function(){this.expect("return");var e=this.expression();return e.isEmpty?new r.Return:new r.Return(e)},unless:function(){this.expect("unless"),this.state.push("conditional"),this.cond=!0;var e=new r.If(this.expression(),!0);return this.cond=!1,e.block=this.block(e,!1),this.state.pop(),e},ifstmt:function(){this.expect("if"),this.state.push("conditional"),this.cond=!0;var e,t,o=new r.If(this.expression());for(this.cond=!1,o.block=this.block(o,!1),this.skip(["newline","comment"]);this.accept("else");){if(this.accept("if"))this.cond=!0,e=this.expression(),this.cond=!1,t=this.block(o,!1),o.elses.push(new r.If(e,t));else{o.elses.push(this.block(o,!1));break}this.skip(["newline","comment"])}return this.state.pop(),o},atblock:function(e){return e||this.expect("atblock"),e=new r.Atblock,this.state.push("atblock"),e.block=this.block(e,!1),this.state.pop(),e},atrule:function(){var e,t=this.expect("atrule").val,o=new r.Atrule(t);return this.skipSpacesAndComments(),o.segments=this.selectorParts(),this.skipSpacesAndComments(),e=this.peek().type,("indent"==e||"{"==e||"newline"==e&&"{"==this.lookahead(2).type)&&(this.state.push("atrule"),o.block=this.block(o),this.state.pop()),o},scope:function(){this.expect("scope");var e=this.selectorParts().map(function(e){return e.val}).join("");return this.selectorScope=e.trim(),r.nil},supports:function(){this.expect("supports");var e=new r.Supports(this.supportsCondition());return this.state.push("atrule"),e.block=this.block(e),this.state.pop(),e},supportsCondition:function(){var e=this.supportsNegation()||this.supportsOp();return e||(this.cond=!0,e=this.expression(),this.cond=!1),e},supportsNegation:function(){if(this.accept("not")){var e=new r.Expression;return e.push(new r.Literal("not")),e.push(this.supportsFeature()),e}},supportsOp:function(){var e,t,o=this.supportsFeature();if(o){for(t=new r.Expression,t.push(o);e=this.accept("&&")||this.accept("||");)t.push(new r.Literal("&&"==e.val?"and":"or")),t.push(this.supportsFeature());return t}},supportsFeature:function(){if(this.skipSpacesAndComments(),"("==this.peek().type){var e=this.lookahead(2).type;if("ident"==e||"{"==e)return this.feature();this.expect("(");var t=new r.Expression;return t.push(new r.Literal("(")),t.push(this.supportsCondition()),this.expect(")"),t.push(new r.Literal(")")),this.skipSpacesAndComments(),t}},extend:function(){var e,t,o,n=this.expect("extend"),s=[];do{if(o=this.selectorParts(),!o.length)continue;if(e=new r.Selector(o),s.push(e),"!"!==this.peek().type)continue;if(n=this.lookahead(2),"ident"!==n.type||"optional"!==n.val.name)continue;this.skip(["!","ident"]),e.optional=!0}while(this.accept(","));return t=new r.Extend(s),t.lineno=n.lineno,t.column=n.column,t},media:function(){this.expect("media"),this.state.push("atrule");var e=new r.Media(this.queries());return e.block=this.block(e),this.state.pop(),e},queries:function(){var e=new r.QueryList,t=["comment","newline","space"];do this.skip(t),e.push(this.query()),this.skip(t);while(this.accept(","));return e},query:function(){var e,t,o,n=new r.Query;if("ident"==this.peek().type&&("."==this.lookahead(2).type||"["==this.lookahead(2).type))return this.cond=!0,e=this.expression(),this.cond=!1,n.push(new r.Feature(e.nodes)),n;if((t=this.accept("ident")||this.accept("not"))&&(t=new r.Literal(t.val.string||t.val),this.skipSpacesAndComments(),(o=this.accept("ident"))?(n.type=o.val,n.predicate=t):n.type=t,this.skipSpacesAndComments(),!this.accept("&&")))return n;do n.push(this.feature());while(this.accept("&&"));return n},feature:function(){this.skipSpacesAndComments(),this.expect("("),this.skipSpacesAndComments();var e=new r.Feature(this.interpolate());return this.skipSpacesAndComments(),this.accept(":"),this.skipSpacesAndComments(),this.inProperty=!0,e.expr=this.list(),this.inProperty=!1,this.skipSpacesAndComments(),this.expect(")"),this.skipSpacesAndComments(),e},mozdocument:function(){this.expect("-moz-document");var e=new r.Atrule("-moz-document"),t=[];do this.skipSpacesAndComments(),t.push(this.functionCall()),this.skipSpacesAndComments();while(this.accept(","));return e.segments=[new r.Literal(t.join(", "))],this.state.push("atrule"),e.block=this.block(e,!1),this.state.pop(),e},atimport:function(){return this.expect("import"),this.allowPostfix=!0,new r.Import(this.expression(),!1)},require:function(){return this.expect("require"),this.allowPostfix=!0,new r.Import(this.expression(),!0)},charset:function(){this.expect("charset");var e=this.expect("string").val;return this.allowPostfix=!0,new r.Charset(e)},namespace:function(){var e,t;return this.expect("namespace"),this.skipSpacesAndComments(),(t=this.accept("ident"))&&(t=t.val),this.skipSpacesAndComments(),e=this.accept("string")||this.url(),this.allowPostfix=!0,new r.Namespace(e,t)},keyframes:function(){var e,t=this.expect("keyframes");return this.skipSpacesAndComments(),e=new r.Keyframes(this.selectorParts(),t.val),this.skipSpacesAndComments(),this.state.push("atrule"),e.block=this.block(e),this.state.pop(),e},literal:function(){return this.expect("literal").val},id:function(){var e=this.expect("ident");return this.accept("space"),e.val},ident:function(){for(var e=2,t=this.lookahead(e).type;"space"==t;)t=this.lookahead(++e).type;switch(t){case"=":case"?=":case"-=":case"+=":case"*=":case"/=":case"%=":return this.assignment();case".":if("space"==this.lookahead(e-1).type)return this.selector();if(this._ident==this.peek())return this.id();for(;"="!=this.lookahead(++e).type&&!~["[",",","newline","indent","eos"].indexOf(this.lookahead(e).type););if("="==this.lookahead(e).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"[":if(this._ident==this.peek())return this.id();for(;"]"!=this.lookahead(e++).type&&"selector"!=this.lookahead(e).type&&"eos"!=this.lookahead(e).type;);if("="==this.lookahead(e).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"-":case"+":case"/":case"*":case"%":case"**":case"&&":case"||":case">":case"<":case">=":case"<=":case"!=":case"==":case"?":case"in":case"is a":case"is defined":if(this._ident==this.peek())return this.id();switch(this._ident=this.peek(),this.currentState()){case"for":case"selector":return this.property();case"root":case"atblock":case"atrule":return"["==t?this.subscript():this.selector();case"function":case"conditional":return this.looksLikeSelector()?this.selector():this.expression();default:return this.operand?this.id():this.expression();}default:switch(this.currentState()){case"root":return this.selector();case"for":case"selector":case"function":case"conditional":case"atblock":case"atrule":return this.property();default:var o=this.id();return"interpolation"==this.previousState()&&(o.mixin=!0),o;}}},interpolate:function(){var e,t,o=[];for(t=this.accept("*"),t&&o.push(new r.Literal("*"));;)if(this.accept("{"))this.state.push("interpolation"),o.push(this.expression()),this.expect("}"),this.state.pop();else if(e=this.accept("-"))o.push(new r.Literal("-"));else if(e=this.accept("ident"))o.push(e.val);else break;return o.length||this.expect("ident"),o},property:function(){if(this.looksLikeSelector(!0))return this.selector();var e=this.interpolate(),t=new r.Property(e),o=t;return this.accept("space"),this.accept(":")&&this.accept("space"),this.state.push("property"),this.inProperty=!0,t.expr=this.list(),t.expr.isEmpty&&(o=e[0]),this.inProperty=!1,this.allowPostfix=!0,this.state.pop(),this.accept(";"),o},selector:function(){var e,t,o=new r.Group,n=this.selectorScope,s="root"==this.currentState();do this.accept("newline"),e=this.selectorParts(),s&&n&&e.unshift(new r.Literal(n+" ")),e.length&&(t=new r.Selector(e),t.lineno=e[0].lineno,t.column=e[0].column,o.push(t));while(this.accept(",")||this.accept("newline"));return"selector-parts"==this.currentState()?o.nodes:(this.state.push("selector"),o.block=this.block(o),this.state.pop(),o)},selectorParts:function(){for(var e,t=[];e=this.selectorToken();)switch(e.type){case"{":this.skipSpaces();var o=this.expression();this.skipSpaces(),this.expect("}"),t.push(o);break;case this.prefix&&".":var n=new r.Literal(e.val+this.prefix);n.prefixed=!0,t.push(n);break;case"comment":break;case"color":case"unit":t.push(new r.Literal(e.val.raw));break;case"space":t.push(new r.Literal(" "));break;case"function":t.push(new r.Literal(e.val.name+"("));break;case"ident":t.push(new r.Literal(e.val.name||e.val.string));break;default:t.push(new r.Literal(e.val)),e.space&&t.push(new r.Literal(" "));}return t},assignment:function(){var e,t,o=this.id().name;if(e=this.accept("=")||this.accept("?=")||this.accept("+=")||this.accept("-=")||this.accept("*=")||this.accept("/=")||this.accept("%=")){this.state.push("assignment");var n=this.list();switch(n.isEmpty&&this.assignAtblock(n),t=new r.Ident(o,n),this.state.pop(),e.type){case"?=":var s=new r.BinOp("is defined",t),i=new r.Expression;i.push(new r.Ident(o)),t=new r.Ternary(s,i,t);break;case"+=":case"-=":case"*=":case"/=":case"%=":t.val=new r.BinOp(e.type[0],new r.Ident(o),n);}}return t},fun:function(){var e,t=1,o=2;out:for(;e=this.lookahead(o++);)switch(e.type){case"function":case"(":++t;break;case")":if(! --t)break out;break;case"eos":this.error("failed to find closing paren \")\"");}switch(this.currentState()){case"expression":return this.functionCall();default:return this.looksLikeFunctionDefinition(o)?this.functionDefinition():this.expression();}},url:function(){this.expect("function"),this.state.push("function arguments");var e=this.args();return this.expect(")"),this.state.pop(),new r.Call("url",e)},functionCall:function(){var e=this.accept("+");if("url"==this.peek().val.name)return this.url();var t=this.expect("function").val.name;this.state.push("function arguments"),this.parens++;var o=this.args();this.expect(")"),this.parens--,this.state.pop();var n=new r.Call(t,o);return e&&(this.state.push("function"),n.block=this.block(n),this.state.pop()),n},functionDefinition:function(){var e=this.expect("function").val.name;this.state.push("function params"),this.skipWhitespace();var t=this.params();this.skipWhitespace(),this.expect(")"),this.state.pop(),this.state.push("function");var o=new r.Function(e,t);return o.block=this.block(o),this.state.pop(),new r.Ident(e,o)},params:function(){for(var e,t,o=new r.Params;e=this.accept("ident");)this.accept("space"),o.push(t=e.val),this.accept("...")?t.rest=!0:this.accept("=")&&(t.val=this.expression()),this.skipWhitespace(),this.accept(","),this.skipWhitespace();return o},args:function(){var e,t=new r.Arguments;do"ident"==this.peek().type&&":"==this.lookahead(2).type?(e=this.next().val.string,this.expect(":"),t.map[e]=this.expression()):t.push(this.expression());while(this.accept(","));return t},list:function(){for(var e=this.expression();this.accept(",");)if(e.isList)t.push(this.expression());else{var t=new r.Expression(!0);t.push(e),t.push(this.expression()),e=t}return e},expression:function(){var e,t=new r.Expression;for(this.state.push("expression");e=this.negation();)e||this.error("unexpected token {peek} in expression"),t.push(e);return this.state.pop(),t.nodes.length&&(t.lineno=t.nodes[0].lineno,t.column=t.nodes[0].column),t},negation:function(){return this.accept("not")?new r.UnaryOp("!",this.negation()):this.ternary()},ternary:function(){var e=this.logical();if(this.accept("?")){var t=this.expression();this.expect(":");var o=this.expression();e=new r.Ternary(e,t,o)}return e},logical:function(){for(var e,t=this.typecheck();e=this.accept("&&")||this.accept("||");)t=new r.BinOp(e.type,t,this.typecheck());return t},typecheck:function(){for(var e,t=this.equality();e=this.accept("is a");)this.operand=!0,t||this.error("illegal unary \""+e+"\", missing left-hand operand"),t=new r.BinOp(e.type,t,this.equality()),this.operand=!1;return t},equality:function(){for(var e,t=this.inop();e=this.accept("==")||this.accept("!=");)this.operand=!0,t||this.error("illegal unary \""+e+"\", missing left-hand operand"),t=new r.BinOp(e.type,t,this.inop()),this.operand=!1;return t},inop:function(){for(var e=this.relational();this.accept("in");)this.operand=!0,e||this.error("illegal unary \"in\", missing left-hand operand"),e=new r.BinOp("in",e,this.relational()),this.operand=!1;return e},relational:function(){for(var e,t=this.range();e=this.accept(">=")||this.accept("<=")||this.accept("<")||this.accept(">");)this.operand=!0,t||this.error("illegal unary \""+e+"\", missing left-hand operand"),t=new r.BinOp(e.type,t,this.range()),this.operand=!1;return t},range:function(){var e,t=this.additive();return(e=this.accept("...")||this.accept(".."))&&(this.operand=!0,!t&&this.error("illegal unary \""+e+"\", missing left-hand operand"),t=new r.BinOp(e.val,t,this.additive()),this.operand=!1),t},additive:function(){for(var e,t=this.multiplicative();e=this.accept("+")||this.accept("-");)this.operand=!0,t=new r.BinOp(e.type,t,this.multiplicative()),this.operand=!1;return t},multiplicative:function(){for(var e,t=this.defined();e=this.accept("**")||this.accept("*")||this.accept("/")||this.accept("%");){if(this.operand=!0,"/"==e&&this.inProperty&&!this.parens)return this.stash.push(new s("literal",new r.Literal("/"))),this.operand=!1,t;t||this.error("illegal unary \""+e+"\", missing left-hand operand"),t=new r.BinOp(e.type,t,this.defined()),this.operand=!1}return t},defined:function(){var e=this.unary();return this.accept("is defined")&&(!e&&this.error("illegal unary \"is defined\", missing left-hand operand"),e=new r.BinOp("is defined",e)),e},unary:function(){var e,t;return(e=this.accept("!")||this.accept("~")||this.accept("+")||this.accept("-"))?(this.operand=!0,t=this.unary(),t||this.error("illegal unary \""+e+"\""),t=new r.UnaryOp(e.type,t),this.operand=!1,t):this.subscript()},subscript:function(){for(var e=this.member();this.accept("[");)e=new r.BinOp("[]",e,this.expression()),this.expect("]");return this.accept("=")&&(e.op+="=",e.val=this.list(),e.val.isEmpty&&this.assignAtblock(e.val)),e},member:function(){var e=this.primary();if(e){for(;this.accept(".");){var t=new r.Ident(this.expect("ident").val.string);e=new r.Member(e,t)}this.skipSpaces(),this.accept("=")&&(e.val=this.list(),e.val.isEmpty&&this.assignAtblock(e.val))}return e},object:function(){var e,t,o,n=new r.Object;for(this.expect("{"),this.skipWhitespace();!this.accept("}");)this.accept("comment")||this.accept("newline")||(o||this.accept(","),e=this.accept("ident")||this.accept("string"),e||this.error("expected \"ident\" or \"string\", got {peek}"),e=e.val.hash,this.skipSpacesAndComments(),this.expect(":"),t=this.expression(),n.set(e,t),o=this.accept(","),this.skipWhitespace());return n},primary:function(){var e;if(this.skipSpaces(),this.accept("(")){++this.parens;var t=this.expression(),o=this.expect(")");return--this.parens,this.accept("%")&&t.push(new r.Ident("%")),e=this.peek(),!o.space&&"ident"==e.type&&~i.indexOf(e.val.string)&&(t.push(new r.Ident(e.val.string)),this.next()),t}switch(e=this.peek(),e.type){case"null":case"unit":case"color":case"string":case"literal":case"boolean":case"comment":return this.next().val;case!this.cond&&"{":return this.object();case"atblock":return this.atblock();case"atrule":var n=new r.Ident(this.next().val);return n.property=!0,n;case"ident":return this.ident();case"function":return e.anonymous?this.functionDefinition():this.functionCall();}}}}),e.register("renderer.js",function(e,t,o){function n(e,t){t=t||{},t.globals=t.globals||{},t.functions=t.functions||{},t.use=t.use||[],t.use=Array.isArray(t.use)?t.use:[t.use],t.imports=[],t.paths=t.paths||[],t.filename=t.filename||"stylus",t.Evaluator=t.Evaluator||s,this.options=t,this.str=e}var r=o("./parser"),s=o("./visitor/evaluator"),i=o("./visitor/normalizer"),a=o("./utils"),l=o("./nodes"),p=o("./path").join;e.exports=n,n.prototype.render=function(e){for(var t=this.parser=new r(this.str,this.options),n=0,s=this.options.use.length;n<s;n++)this.use(this.options.use[n]);try{l.filename=this.options.filename;var p=t.parse();this.evaluator=new this.options.Evaluator(p,this.options),this.nodes=l,this.evaluator.renderer=this,p=this.evaluator.evaluate();var c=new i(p,this.options);p=c.normalize();var u=this.options.sourcemap?new(o("./visitor/sourcemapper"))(p,this.options):new(o("./visitor/compiler"))(p,this.options),d=u.compile();this.options.sourcemap&&(this.sourcemap=u.map.toJSON())}catch(o){var m={input:o.input||this.str,filename:o.filename||this.options.filename,lineno:o.lineno||t.lexer.lineno,column:o.column||t.lexer.column};if(!e)throw a.formatException(o,m);return e(a.formatException(o,m))}return e?void e(null,d):d},n.prototype.deps=function(e){var t=a.merge({cache:!1},this.options);e&&(t.filename=e);var n=o("./visitor/deps-resolver"),s=new r(this.str,t);try{l.filename=t.filename;var i=s.parse(),p=new n(i,t);return p.resolve()}catch(e){var c={input:e.input||this.str,filename:e.filename||t.filename,lineno:e.lineno||s.lexer.lineno,column:e.column||s.lexer.column};throw a.formatException(e,c)}},n.prototype.set=function(e,t){return this.options[e]=t,this},n.prototype.get=function(e){return this.options[e]},n.prototype.include=function(e){return this.options.paths.push(e),this},n.prototype.use=function(e){return e.call(this,this),this},n.prototype.define=function(e,t,o){return(t=a.coerce(t,o),t.nodeName)?(this.options.globals[e]=t,this):(this.options.functions[e]=t,null!=o&&(t.raw=o),this)}}),e.register("selector-parser.js",function(e){var t=[">","+","~"],o=e.exports=function(e,t,o){this.str=e,this.stack=t||[],this.parts=o||[],this.pos=0,this.level=2,this.nested=!0,this.ignore=!1};o.prototype.skip=function(e){this.str=this.str.substr(e),this.pos+=e},o.prototype.skipSpaces=function(){for(;" "==this.str[0];)this.skip(1)},o.prototype.advance=function(){return this.root()||this.relative()||this.initial()||this.escaped()||this.parent()||this.partial()||this.char()},o.prototype.root=function(){this.pos||"/"!=this.str[0]||"deep"==this.str.slice(1,5)||(this.nested=!1,this.skip(1))},o.prototype.relative=function(e){if((!this.pos||e)&&"../"==this.str.slice(0,3)){for(this.nested=!1,this.skip(3);this.relative(!0);)this.level++;if(!this.raw){var t=this.stack[this.stack.length-this.level];if(t)return t;this.ignore=!0}}},o.prototype.initial=function(){if(!this.pos&&"~"==this.str[0]&&"/"==this.str[1])return this.nested=!1,this.skip(2),this.stack[0]},o.prototype.escaped=function(){if("\\"==this.str[0]){var e=this.str[1];if("&"==e||"^"==e)return this.skip(2),e}},o.prototype.parent=function(){if("&"==this.str[0]){if(this.nested=!1,!this.pos&&(!this.stack.length||this.raw)){for(var e=0;" "==this.str[++e];);if(~t.indexOf(this.str[e]))return void this.skip(e+1)}if(this.skip(1),!this.raw)return this.stack[this.stack.length-1]}},o.prototype.partial=function(){if("^"==this.str[0]&&"["==this.str[1]){this.skip(2),this.skipSpaces();var e=this.range();if(this.skipSpaces(),"]"!=this.str[0])return"^[";if(this.nested=!1,this.skip(1),e)return e;this.ignore=!0}},o.prototype.number=function(){var e=0,t="";for("-"==this.str[e]&&(t+=this.str[e++]);48<=this.str.charCodeAt(e)&&57>=this.str.charCodeAt(e);)t+=this.str[e++];if(t)return this.skip(e),+t},o.prototype.range=function(){var e,t=this.number();if(".."==this.str.slice(0,2)){this.skip(2);var n=this.number(),r=this.parts.length;if(0>t&&(t=r+t-1),0>n&&(n=r+n-1),t>n){var s=t;t=n,n=s}n<r-1&&(e=this.parts.slice(t,n+1).map(function(e){var t=new o(e,this.stack,this.parts);return t.raw=!0,t.parse()},this).map(function(e){return(e.nested?" ":"")+e.val}).join("").trim())}else e=this.stack[0>t?this.stack.length+t-1:t];return e?e:void(this.ignore=!0)},o.prototype.char=function(){var e=this.str[0];return this.skip(1),e},o.prototype.parse=function(){for(var e="";this.str.length;)if(e+=this.advance()||"",this.ignore){e="";break}return{val:e.trimRight(),nested:this.nested}}}),e.register("stack/index.js",function(e){var t=e.exports=function(){Array.apply(this,arguments)};t.prototype.__proto__=Array.prototype,t.prototype.push=function(e){return e.stack=this,e.parent=this.currentFrame,[].push.apply(this,arguments)},t.prototype.__defineGetter__("currentFrame",function(){return this[this.length-1]}),t.prototype.getBlockFrame=function(e){for(var t=0;t<this.length;++t)if(e==this[t].block)return this[t]},t.prototype.lookup=function(e){var t,o=this.currentFrame.block;do{var n=this.getBlockFrame(o);if(n&&(t=n.lookup(e)))return t}while(o=o.parent)},t.prototype.inspect=function(){return this.reverse().map(function(e){return e.inspect()}).join("\n")},t.prototype.toString=function(){for(var e,t,o,n=[],r=this.length;r--;)if(e=this[r].block,t=e.node)switch(o="("+t.filename+":"+(t.lineno+1)+":"+t.column+")",t.nodeName){case"function":n.push("    at "+t.name+"() "+o);break;case"group":n.push("    at \""+t.nodes[0].val+"\" "+o);}return n.join("\n")}}),e.register("stack/frame.js",function(e,t,o){var n=o("./scope"),r=e.exports=function(e){this._scope=!1===e.scope?null:new n,this.block=e};r.prototype.__defineGetter__("scope",function(){return this._scope||this.parent.scope}),r.prototype.lookup=function(e){return this.scope.lookup(e)},r.prototype.inspect=function(){return"[Frame "+(!1===this.block.scope?"scope-less":this.scope.inspect())+"]"}}),e.register("stack/scope.js",function(e){var t=e.exports=function(){this.locals={}};t.prototype.add=function(e){this.locals[e.name]=e.val},t.prototype.lookup=function(e){return this.locals[e]},t.prototype.inspect=function(){var e=Object.keys(this.locals).map(function(e){return"@"+e});return"[Scope"+(e.length?" "+e.join(", "):"")+"]"}}),e.register("stylus.js",function(e,t,o){var n=o("./renderer"),r=o("./nodes"),s=o("./utils");t=e.exports=function(e,t){return e="called-from = ()\n\nvendors = moz webkit o ms official\n\n// stringify the given arg\n\n-string(arg)\n  type(arg) + ' ' + arg\n\n// require a color\n\nrequire-color(color)\n  unless color is a 'color'\n    error('RGB or HSL value expected, got a ' + -string(color))\n\n// require a unit\n\nrequire-unit(n)\n  unless n is a 'unit'\n    error('unit expected, got a ' + -string(n))\n\n// require a string\n\nrequire-string(str)\n  unless str is a 'string' or str is a 'ident'\n    error('string expected, got a ' + -string(str))\n\n// Math functions\n\nabs(n) { math(n, 'abs') }\nmin(a, b) { a < b ? a : b }\nmax(a, b) { a > b ? a : b }\n\n// Trigonometrics\nPI = -math-prop('PI')\n\nradians-to-degrees(angle)\n  angle * (180 / PI)\n\ndegrees-to-radians(angle)\n  unit(angle * (PI / 180),'')\n\nsin(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'sin'), 9)\n\ncos(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'cos'), 9)\n\n// Rounding Math functions\n\nceil(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'ceil') / multiplier\n\nfloor(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'floor') / multiplier\n\nround(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'round') / multiplier\n\n// return the sum of the given numbers\n\nsum(nums)\n  sum = 0\n  sum += n for n in nums\n\n// return the average of the given numbers\n\navg(nums)\n  sum(nums) / length(nums)\n\n// return a unitless number, or pass through\n\nremove-unit(n)\n  if typeof(n) is 'unit'\n    unit(n, '')\n  else\n    n\n\n// convert a percent to a decimal, or pass through\n\npercent-to-decimal(n)\n  if unit(n) is '%'\n    remove-unit(n) / 100\n  else\n    n\n\n// check if n is an odd number\n\nodd(n)\n  1 == n % 2\n\n// check if n is an even number\n\neven(n)\n  0 == n % 2\n\n// check if color is light\n\nlight(color)\n  lightness(color) >= 50%\n\n// check if color is dark\n\ndark(color)\n  lightness(color) < 50%\n\n// desaturate color by amount\n\ndesaturate(color, amount)\n  adjust(color, 'saturation', - amount)\n\n// saturate color by amount\n\nsaturate(color = '', amount = 100%)\n  if color is a 'color'\n    adjust(color, 'saturation', amount)\n  else\n    unquote( 'saturate(' + color + ')' )\n\n// darken by the given amount\n\ndarken(color, amount)\n  adjust(color, 'lightness', - amount)\n\n// lighten by the given amount\n\nlighten(color, amount)\n  adjust(color, 'lightness', amount)\n\n// decrease opacity by amount\n\nfade-out(color, amount)\n  color - rgba(black, percent-to-decimal(amount))\n\n// increase opacity by amount\n\nfade-in(color, amount)\n  color + rgba(black, percent-to-decimal(amount))\n\n// spin hue by a given amount\n\nspin(color, amount)\n  color + unit(amount, deg)\n\n// mix two colors by a given amount\n\nmix(color1, color2, weight = 50%)\n  unless weight in 0..100\n    error('Weight must be between 0% and 100%')\n\n  if length(color1) == 2\n    weight = color1[0]\n    color1 = color1[1]\n\n  else if length(color2) == 2\n    weight = 100 - color2[0]\n    color2 = color2[1]\n\n  require-color(color1)\n  require-color(color2)\n\n  p = unit(weight / 100, '')\n  w = p * 2 - 1\n\n  a = alpha(color1) - alpha(color2)\n\n  w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2\n  w2 = 1 - w1\n\n  channels = (red(color1) red(color2)) (green(color1) green(color2)) (blue(color1) blue(color2))\n  rgb = ()\n\n  for pair in channels\n    push(rgb, floor(pair[0] * w1 + pair[1] * w2))\n\n  a1 = alpha(color1) * p\n  a2 = alpha(color2) * (1 - p)\n  alpha = a1 + a2\n\n  rgba(rgb[0], rgb[1], rgb[2], alpha)\n\n// invert colors, leave alpha intact\n\ninvert(color = '')\n  if color is a 'color'\n    rgba(#fff - color, alpha(color))\n  else\n    unquote( 'invert(' + color + ')' )\n\n// give complement of the given color\n\ncomplement( color )\n  spin( color, 180 )\n\n// give grayscale of the given color\n\ngrayscale( color = '' )\n  if color is a 'color'\n    desaturate( color, 100% )\n  else\n    unquote( 'grayscale(' + color + ')' )\n\n// mix the given color with white\n\ntint( color, percent )\n  mix( white, color, percent )\n\n// mix the given color with black\n\nshade( color, percent )\n  mix( black, color, percent )\n\n// return the last value in the given expr\n\nlast(expr)\n  expr[length(expr) - 1]\n\n// return keys in the given pairs or object\n\nkeys(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key in pairs\n      push(ret, key)\n  else\n    for pair in pairs\n      push(ret, pair[0]);\n  ret\n\n// return values in the given pairs or object\n\nvalues(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key, val in pairs\n      push(ret, val)\n  else\n    for pair in pairs\n      push(ret, pair[1]);\n  ret\n\n// join values with the given delimiter\n\njoin(delim, vals...)\n  buf = ''\n  vals = vals[0] if length(vals) == 1\n  for val, i in vals\n    buf += i ? delim + val : val\n\n// add a CSS rule to the containing block\n\n// - This definition allows add-property to be used as a mixin\n// - It has the same effect as interpolation but allows users\n//   to opt for a functional style\n\nadd-property-function = add-property\nadd-property(name, expr)\n  if mixin\n    {name} expr\n  else\n    add-property-function(name, expr)\n\nprefix-classes(prefix)\n  -prefix-classes(prefix, block)\n\n// Caching mixin, use inside your functions to enable caching by extending.\n\n$stylus_mixin_cache = {}\ncache()\n  $key = (current-media() or 'no-media') + '__' + called-from[0] + '__' + arguments\n  if $key in $stylus_mixin_cache\n    @extend {'$cache_placeholder_for_' + $stylus_mixin_cache[$key]}\n  else if 'cache' in called-from\n    {block}\n  else\n    $id = length($stylus_mixin_cache)\n\n    &,\n    /$cache_placeholder_for_{$id}\n      $stylus_mixin_cache[$key] = $id\n      {block}\n\n// Percentage function to convert a number, e.g. '.45', into a percentage, e.g. '45%'\n\npercentage(num)\n  return unit(num * 100, '%')\n\n// Returns the position of a `value` within a `list`\n\nindex(list, value)\n  for val, i in list\n    return i if val == value\n"+e,new n(e,t)},t.version="0.54.5",t.nodes=r,t.functions=o("./functions"),t.utils=o("./utils"),t.Visitor=o("./visitor"),t.Parser=o("./parser"),t.Evaluator=o("./visitor/evaluator"),t.Normalizer=o("./visitor/normalizer"),t.Compiler=o("./visitor/compiler"),t.render=function(e,t,o){return"function"==typeof t&&(o=t,t={}),e="called-from = ()\n\nvendors = moz webkit o ms official\n\n// stringify the given arg\n\n-string(arg)\n  type(arg) + ' ' + arg\n\n// require a color\n\nrequire-color(color)\n  unless color is a 'color'\n    error('RGB or HSL value expected, got a ' + -string(color))\n\n// require a unit\n\nrequire-unit(n)\n  unless n is a 'unit'\n    error('unit expected, got a ' + -string(n))\n\n// require a string\n\nrequire-string(str)\n  unless str is a 'string' or str is a 'ident'\n    error('string expected, got a ' + -string(str))\n\n// Math functions\n\nabs(n) { math(n, 'abs') }\nmin(a, b) { a < b ? a : b }\nmax(a, b) { a > b ? a : b }\n\n// Trigonometrics\nPI = -math-prop('PI')\n\nradians-to-degrees(angle)\n  angle * (180 / PI)\n\ndegrees-to-radians(angle)\n  unit(angle * (PI / 180),'')\n\nsin(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'sin'), 9)\n\ncos(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'cos'), 9)\n\n// Rounding Math functions\n\nceil(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'ceil') / multiplier\n\nfloor(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'floor') / multiplier\n\nround(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'round') / multiplier\n\n// return the sum of the given numbers\n\nsum(nums)\n  sum = 0\n  sum += n for n in nums\n\n// return the average of the given numbers\n\navg(nums)\n  sum(nums) / length(nums)\n\n// return a unitless number, or pass through\n\nremove-unit(n)\n  if typeof(n) is 'unit'\n    unit(n, '')\n  else\n    n\n\n// convert a percent to a decimal, or pass through\n\npercent-to-decimal(n)\n  if unit(n) is '%'\n    remove-unit(n) / 100\n  else\n    n\n\n// check if n is an odd number\n\nodd(n)\n  1 == n % 2\n\n// check if n is an even number\n\neven(n)\n  0 == n % 2\n\n// check if color is light\n\nlight(color)\n  lightness(color) >= 50%\n\n// check if color is dark\n\ndark(color)\n  lightness(color) < 50%\n\n// desaturate color by amount\n\ndesaturate(color, amount)\n  adjust(color, 'saturation', - amount)\n\n// saturate color by amount\n\nsaturate(color = '', amount = 100%)\n  if color is a 'color'\n    adjust(color, 'saturation', amount)\n  else\n    unquote( 'saturate(' + color + ')' )\n\n// darken by the given amount\n\ndarken(color, amount)\n  adjust(color, 'lightness', - amount)\n\n// lighten by the given amount\n\nlighten(color, amount)\n  adjust(color, 'lightness', amount)\n\n// decrease opacity by amount\n\nfade-out(color, amount)\n  color - rgba(black, percent-to-decimal(amount))\n\n// increase opacity by amount\n\nfade-in(color, amount)\n  color + rgba(black, percent-to-decimal(amount))\n\n// spin hue by a given amount\n\nspin(color, amount)\n  color + unit(amount, deg)\n\n// mix two colors by a given amount\n\nmix(color1, color2, weight = 50%)\n  unless weight in 0..100\n    error('Weight must be between 0% and 100%')\n\n  if length(color1) == 2\n    weight = color1[0]\n    color1 = color1[1]\n\n  else if length(color2) == 2\n    weight = 100 - color2[0]\n    color2 = color2[1]\n\n  require-color(color1)\n  require-color(color2)\n\n  p = unit(weight / 100, '')\n  w = p * 2 - 1\n\n  a = alpha(color1) - alpha(color2)\n\n  w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2\n  w2 = 1 - w1\n\n  channels = (red(color1) red(color2)) (green(color1) green(color2)) (blue(color1) blue(color2))\n  rgb = ()\n\n  for pair in channels\n    push(rgb, floor(pair[0] * w1 + pair[1] * w2))\n\n  a1 = alpha(color1) * p\n  a2 = alpha(color2) * (1 - p)\n  alpha = a1 + a2\n\n  rgba(rgb[0], rgb[1], rgb[2], alpha)\n\n// invert colors, leave alpha intact\n\ninvert(color = '')\n  if color is a 'color'\n    rgba(#fff - color, alpha(color))\n  else\n    unquote( 'invert(' + color + ')' )\n\n// give complement of the given color\n\ncomplement( color )\n  spin( color, 180 )\n\n// give grayscale of the given color\n\ngrayscale( color = '' )\n  if color is a 'color'\n    desaturate( color, 100% )\n  else\n    unquote( 'grayscale(' + color + ')' )\n\n// mix the given color with white\n\ntint( color, percent )\n  mix( white, color, percent )\n\n// mix the given color with black\n\nshade( color, percent )\n  mix( black, color, percent )\n\n// return the last value in the given expr\n\nlast(expr)\n  expr[length(expr) - 1]\n\n// return keys in the given pairs or object\n\nkeys(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key in pairs\n      push(ret, key)\n  else\n    for pair in pairs\n      push(ret, pair[0]);\n  ret\n\n// return values in the given pairs or object\n\nvalues(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key, val in pairs\n      push(ret, val)\n  else\n    for pair in pairs\n      push(ret, pair[1]);\n  ret\n\n// join values with the given delimiter\n\njoin(delim, vals...)\n  buf = ''\n  vals = vals[0] if length(vals) == 1\n  for val, i in vals\n    buf += i ? delim + val : val\n\n// add a CSS rule to the containing block\n\n// - This definition allows add-property to be used as a mixin\n// - It has the same effect as interpolation but allows users\n//   to opt for a functional style\n\nadd-property-function = add-property\nadd-property(name, expr)\n  if mixin\n    {name} expr\n  else\n    add-property-function(name, expr)\n\nprefix-classes(prefix)\n  -prefix-classes(prefix, block)\n\n// Caching mixin, use inside your functions to enable caching by extending.\n\n$stylus_mixin_cache = {}\ncache()\n  $key = (current-media() or 'no-media') + '__' + called-from[0] + '__' + arguments\n  if $key in $stylus_mixin_cache\n    @extend {'$cache_placeholder_for_' + $stylus_mixin_cache[$key]}\n  else if 'cache' in called-from\n    {block}\n  else\n    $id = length($stylus_mixin_cache)\n\n    &,\n    /$cache_placeholder_for_{$id}\n      $stylus_mixin_cache[$key] = $id\n      {block}\n\n// Percentage function to convert a number, e.g. '.45', into a percentage, e.g. '45%'\n\npercentage(num)\n  return unit(num * 100, '%')\n\n// Returns the position of a `value` within a `list`\n\nindex(list, value)\n  for val, i in list\n    return i if val == value\n"+e,new n(e,t).render(o)},t.url=o("./functions/url")}),e.register("token.js",function(e,t){var o=t=e.exports=function(e,t){this.type=e,this.val=t};o.prototype.inspect=function(){var e=" "+this.val;return"[Token:"+this.lineno+":"+this.column+" \x1B[32m"+this.type+"\x1B[0m\x1B[33m"+(this.val?e:"")+"\x1B[0m]"},o.prototype.toString=function(){return(void 0===this.val?this.type:this.val).toString()}}),e.register("utils.js",function(e,t,o){var n=o("./nodes"),r=o("./path").join,s=o("./path").isAbsolute;t.absolute=s||function(e){return"\\\\"==e.substr(0,2)||"/"===e.charAt(0)||/^[a-z]:[\\\/]/i.test(e)},t.lookup=function(e,o,n){var s,a=o.length;if(t.absolute(e))try{return e}catch(e){}for(;a--;)try{if(s=r(o[a],e),n==s)continue;return s}catch(e){}},t.find=function(e,o,n){var s,a,l=o.length;if(t.absolute(e)&&(a=glob.sync(e)).length)return a;for(;l--;)if(s=r(o[l],e),n!=s&&(a=glob.sync(s)).length)return a},t.lookupIndex=function(e,n,s){function i(e){var l=t.lookup(r(e,"package.json"),n,s);if(!l)return /\.styl$/i.test(e)?t.lookupIndex(e,n,s):i(e+".styl");var p=o(relative(__dirname,l)).main;return a=p?t.find(r(e,p),n,s):t.lookupIndex(e,n,s),a}var a=t.find(r(e,"index.styl"),n,s);return a||(a=t.find(r(e,basename(e).replace(/\.styl/i,"")+".styl"),n,s)),a||~e.indexOf("node_modules")||(a=i(r("node_modules",e))),a},t.formatException=function(e,t){var o=t.lineno,n=t.column,r=t.filename,s=t.input,i=t.context||8,i=i/2,a=("\n"+s).split("\n"),l=Math.max(o-i,1),p=Math.min(a.length,o+i),c=p.toString().length,i=a.slice(l,p).map(function(e,t){var r=t+l;return"   "+Array(c-r.toString().length+1).join(" ")+r+"| "+e+(r==o?"\n"+Array(r.toString().length+5+n).join("-")+"^":"")}).join("\n");return e.message=r+":"+o+":"+n+"\n"+i+"\n\n"+e.message+"\n"+(e.stylusStack?e.stylusStack+"\n":""),e.fromStylus&&(e.stack="Error: "+e.message),e},t.assertType=function(e,o,n){if(t.assertPresent(e,n),e.nodeName!=o){var r=e.nodeName,s="expected "+(n?"\""+n+"\" to be a ":"")+o+", but got "+r+":"+e;throw new Error("TypeError: "+s)}},t.assertString=function(e,o){switch(t.assertPresent(e,o),e.nodeName){case"string":case"ident":case"literal":return;default:var n=e.nodeName;throw new Error("TypeError: "+("expected string, ident or literal, but got "+n+":"+e));}},t.assertColor=function(e,o){switch(t.assertPresent(e,o),e.nodeName){case"rgba":case"hsla":return;default:var n=e.nodeName;throw new Error("TypeError: "+("expected rgba or hsla, but got "+n+":"+e));}},t.assertPresent=function(e,t){if(!e){if(t)throw new Error("\""+t+"\" argument required");throw new Error("argument missing")}},t.unwrap=function(e){return e.preserve?e:"arguments"!=e.nodeName&&"expression"!=e.nodeName?e:1==e.nodes.length?"arguments"!=e.nodes[0].nodeName&&"expression"!=e.nodes[0].nodeName?e:t.unwrap(e.nodes[0]):e},t.coerce=function(e,o){switch(typeof e){case"function":return e;case"string":return new n.String(e);case"boolean":return new n.Boolean(e);case"number":return new n.Unit(e);default:return null==e?n.nil:Array.isArray(e)?t.coerceArray(e,o):e.nodeName?e:t.coerceObject(e,o);}},t.coerceArray=function(e,o){var r=new n.Expression;return e.forEach(function(e){r.push(t.coerce(e,o))}),r},t.coerceObject=function(e,o){var r,s=o?new n.Object:new n.Expression;for(var i in e)r=t.coerce(e[i],o),i=new n.Ident(i),o?s.set(i,r):s.push(t.coerceArray([i,r]));return s},t.params=function(e){return e.toString().match(/\(([^)]*)\)/)[1].split(/ *, */)},t.merge=function(e,o,n){for(var r in o)if(n&&e[r]){var s=t.unwrap(e[r]).first,i=t.unwrap(o[r]).first;"object"==s.nodeName&&"object"==i.nodeName?e[r].first.vals=t.merge(s.vals,i.vals,n):e[r]=o[r]}else e[r]=o[r];return e},t.uniq=function(e){for(var t={},o=[],n=0,r=e.length;n<r;++n)e[n]in t||(t[e[n]]=!0,o.push(e[n]));return o},t.compileSelectors=function(e,n){function r(e,t){var o=[e.val],n=new l(o[0],r,o).parse().val,r=[];if(t.length)for(var s=0,a=t.length;s<a;++s){o.push(t[s]),r.push(n);var p=new l(t[s],r,o).parse();p.nested?n+=" "+p.val:n=p.val}return n.trim()}function s(e,t){t?e[t].forEach(function(o){!n&&o.isPlaceholder||(o.inherits?(c.unshift(o.val),s(e,t-1),c.shift()):a.push(p+r(o,c)))}):e[0].forEach(function(e){if(n||!e.isPlaceholder){var t=r(e,c);t&&a.push(p+t)}})}var a=[],l=o("./selector-parser"),p=this.indent||"",c=[];return s(e,e.length-1),t.uniq(a)},t.parseString=function(t){var r,s,i=o("./parser");try{r=new i(t),r.state.push("expression"),s=new n.Expression,s.nodes=r.parse().nodes}catch(o){s=new n.Literal(t)}return s}}),e.register("visitor/index.js",function(e){var t=e.exports=function(e){this.root=e};t.prototype.visit=function(e){var t="visit"+e.constructor.name;return this[t]?this[t](e):e}}),e.register("visitor/compiler.js",function(e,t,o){var n=o("./index"),r=o("../utils"),s=e.exports=function(e,t){t=t||{},this.compress=t.compress,this.firebug=t.firebug,this.linenos=t.linenos,this.spaces=t["indent spaces"]||2,this.indents=1,n.call(this,e),this.stack=[]};s.prototype.__proto__=n.prototype,s.prototype.compile=function(){return this.visit(this.root)},s.prototype.out=function(e){return e},s.prototype.__defineGetter__("indent",function(){return this.compress?"":Array(this.indents).join(Array(this.spaces+1).join(" "))}),s.prototype.needBrackets=function(e){return 1==this.indents||"atrule"!=e.nodeName||e.hasOnlyProperties},s.prototype.visitRoot=function(e){this.buf="";for(var t,o=0,n=e.nodes.length;o<n;++o){t=e.nodes[o],(this.linenos||this.firebug)&&this.debugInfo(t);var r=this.visit(t);r&&(this.buf+=this.out(r+"\n",t))}return this.buf},s.prototype.visitBlock=function(e){var t,o,n=this.compress?"":"\n";if(e.hasProperties&&!e.lacksRenderedSelectors){o=this.needBrackets(e.node),o&&(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents);for(var r=0,s=e.nodes.length;r<s;++r)switch(this.last=s-1==r,t=e.nodes[r],t.nodeName){case"null":case"expression":case"function":case"group":case"block":case"unit":case"media":case"keyframes":case"atrule":case"supports":continue;case!this.compress&&t.inline&&"comment":this.buf=this.buf.slice(0,-1),this.buf+=this.out(" "+this.visit(t)+"\n",t);break;case"property":var a=this.visit(t)+n;this.buf+=this.compress?a:this.out(a,t);break;default:this.buf+=this.out(this.visit(t)+n,t);}o&&(--this.indents,this.buf+=this.out(this.indent+"}"+n))}for(var r=0,s=e.nodes.length;r<s;++r)switch(t=e.nodes[r],t.nodeName){case"group":case"block":case"keyframes":(this.linenos||this.firebug)&&this.debugInfo(t),this.visit(t);break;case"media":case"import":case"atrule":case"supports":this.visit(t);break;case"comment":t.suppress||(this.buf+=this.out(this.indent+this.visit(t)+"\n",t));break;case"charset":case"literal":case"namespace":this.buf+=this.out(this.visit(t)+"\n",t);}},s.prototype.visitKeyframes=function(e){if(e.frames){var t="official"==e.prefix?"":"-"+e.prefix+"-";this.buf+=this.out("@"+t+"keyframes "+this.visit(e.val)+(this.compress?"{":" {\n"),e),this.keyframe=!0,++this.indents,this.visit(e.block),--this.indents,this.keyframe=!1,this.buf+=this.out("}"+(this.compress?"":"\n"))}},s.prototype.visitMedia=function(e){var t=e.val;e.hasOutput&&t.nodes.length&&(this.buf+=this.out("@media ",e),this.visit(t),this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(e.block),--this.indents,this.buf+=this.out("}"+(this.compress?"":"\n")))},s.prototype.visitQueryList=function(e){for(var t=0,o=e.nodes.length;t<o;++t)this.visit(e.nodes[t]),o-1!=t&&(this.buf+=this.out(","+(this.compress?"":" ")))},s.prototype.visitQuery=function(e){var t=e.nodes.length;e.predicate&&(this.buf+=this.out(e.predicate+" ")),e.type&&(this.buf+=this.out(e.type+(t?" and ":"")));for(var o=0;o<t;++o)this.buf+=this.out(this.visit(e.nodes[o])),t-1!=o&&(this.buf+=this.out(" and "))},s.prototype.visitFeature=function(e){return e.expr?e.expr.isEmpty?"("+e.name+")":"("+e.name+":"+(this.compress?"":" ")+this.visit(e.expr)+")":e.name},s.prototype.visitImport=function(e){this.buf+=this.out("@import "+this.visit(e.path)+";\n",e)},s.prototype.visitAtrule=function(e){var t=this.compress?"":"\n";this.buf+=this.out(this.indent+"@"+e.type,e),e.val&&(this.buf+=this.out(" "+e.val.trim())),e.block?e.hasOnlyProperties?this.visit(e.block):(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(e.block),--this.indents,this.buf+=this.out(this.indent+"}"+t)):this.buf+=this.out(";"+t)},s.prototype.visitSupports=function(e){e.hasOutput&&(this.buf+=this.out(this.indent+"@supports ",e),this.isCondition=!0,this.buf+=this.out(this.visit(e.condition)),this.isCondition=!1,this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(e.block),--this.indents,this.buf+=this.out(this.indent+"}"+(this.compress?"":"\n")))},s.prototype.visitComment=function(e){return this.compress?e.suppress?"":e.str:e.str},s.prototype.visitFunction=function(e){return e.name},s.prototype.visitCharset=function(e){return"@charset "+this.visit(e.val)+";"},s.prototype.visitNamespace=function(e){return"@namespace "+(e.prefix?this.visit(e.prefix)+" ":"")+this.visit(e.val)+";"},s.prototype.visitLiteral=function(e){var t=e.val;return e.css&&(t=t.replace(/^  /gm,"")),t},s.prototype.visitBoolean=function(e){return e.toString()},s.prototype.visitRGBA=function(e){return e.toString()},s.prototype.visitHSLA=function(e){return e.rgba.toString()},s.prototype.visitUnit=function(e){var t=e.type||"",o=e.val,n=o!=(0|o);if(this.compress){if("%"!=t&&"s"!=t&&"ms"!=t&&0==o)return"0";if(n&&1>o&&-1<o)return o.toString().replace("0.",".")+t}return(n?parseFloat(o.toFixed(15)):o).toString()+t},s.prototype.visitGroup=function(e){var t=this.keyframe?[]:this.stack,o=this.compress?",":",\n";if(t.push(e.nodes),e.block.hasProperties){var n=r.compileSelectors.call(this,t),s=n.length;if(s){this.keyframe&&(o=this.compress?",":", ");for(var a=0;a<s;++a){var l=n[a],p=a==s-1;this.keyframe&&(l=a?l.trim():l),this.buf+=this.out(l+(p?"":o),e.nodes[a])}}else e.block.lacksRenderedSelectors=!0}this.visit(e.block),t.pop()},s.prototype.visitIdent=function(e){return e.name},s.prototype.visitString=function(e){return this.isURL?e.val:e.toString()},s.prototype.visitNull=function(){return""},s.prototype.visitCall=function(e){this.isURL="url"==e.name;var t=e.args.nodes.map(function(e){return this.visit(e)},this).join(this.compress?",":", ");return this.isURL&&(t="\""+t+"\""),this.isURL=!1,e.name+"("+t+")"},s.prototype.visitExpression=function(e){var t=[],o=this,n=e.nodes.length,r=e.nodes.map(function(e){return o.visit(e)});return r.forEach(function(s,a){if((t.push(s),"/"!=r[a+1]&&"/"!=s)&&!(a==n-1)){var i=o.isURL||o.isCondition&&(")"==r[a+1]||"("==s)?"":" ";t.push(e.isList?o.compress?",":", ":i)}}),t.join("")},s.prototype.visitArguments=s.prototype.visitExpression,s.prototype.visitProperty=function(e){var t=this.visit(e.expr).trim(),o=e.name||e.segments.join(""),n=[];return n.push(this.out(this.indent),this.out(o+(this.compress?":":": "),e),this.out(t,e.expr),this.out(this.compress?this.last?"":";":";")),n.join("")},s.prototype.debugInfo=function(e){var t="stdin"==e.filename?"stdin":fs.realpathSync(e.filename),o=(e.nodes&&e.nodes.length?e.nodes[0].lineno:e.lineno)||1;this.linenos&&(this.buf+="\n/* line "+o+" : "+t+" */\n"),this.firebug&&(t="file\\:\\/\\/"+t.replace(/([.:\/\\])/g,function(e){return"\\"+("\\"===e?"/":e)}),o="\\00003"+o,this.buf+="\n@media -stylus-debug-info{filename{font-family:"+t+"}line{font-family:"+o+"}}\n")}}),e.register("visitor/evaluator.js",function(e,t,o){function n(e,t,n){var r,i=this.importStack,a=o("../parser");if(e.once){if(this.requireHistory[t])return s.nil;if(this.requireHistory[t]=!0,n&&!this.includeCSS)return e}if(~i.indexOf(t))throw new Error("import loop has been found");var p=fs.readFileSync(t,"utf8");if(!p.trim())return s.nil;if(e.path=t,e.dirname=c(t),r=fs.statSync(t),e.mtime=r.mtime,this.paths.push(e.dirname),this.options._imports&&this.options._imports.push(e.clone()),i.push(t),s.filename=t,n&&(n=new s.Literal(p.replace(/\r\n?/g,"\n")),n.lineno=n.column=1,!this.resolveURL))return n;var u=new s.Block,d=new a(p,l.merge({root:u},this.options));try{u=d.parse()}catch(e){var m=d.lexer.lineno,g=d.lexer.column;if(n&&this.includeCSS&&this.resolveURL)return this.warn("ParseError: "+t+":"+m+":"+g+". This file included as-is"),n;throw e.filename=t,e.lineno=m,e.column=g,e.input=p,e}u=u.clone(this.currentBlock),u.parent=this.currentBlock,u.scope=!1;var h=this.visit(u);return i.pop(),(!this.resolveURL||this.resolveURL.nocheck)&&this.paths.pop(),h}var r=o("./index"),s=o("../nodes"),i=o("../stack"),a=o("../stack/frame"),l=o("../utils"),p=o("../functions"),c=o("../path").dirname,u=o("../colors"),d=o("../units"),m=e.exports=function(e,t){t=t||{},r.call(this,e);var o=this.functions=t.functions||{};this.stack=new i,this.imports=t.imports||[],this.globals=t.globals||{},this.paths=t.paths||[],this.prefix=t.prefix||"",this.filename=t.filename,this.includeCSS=t["include css"],this.resolveURL=o.url&&"resolver"==o.url.name&&o.url.options,this.paths.push(c(t.filename||".")),this.stack.push(this.global=new a(e)),this.warnings=t.warn,this.options=t,this.calling=[],this.importStack=[],this.ret=0,this.requireHistory={}};m.prototype.__proto__=r.prototype;var g=r.prototype.visit;m.prototype.visit=function(e){try{return g.call(this,e)}catch(t){if(t.filename)throw t;t.lineno=e.lineno,t.column=e.column,t.filename=e.filename,t.stylusStack=this.stack.toString();try{}catch(e){}throw t}},m.prototype.setup=function(){var e=this.root,t=[];this.populateGlobalScope(),this.imports.forEach(function(e){var o=new s.Expression;o.push(new s.String(e)),t.push(new s.Import(o))},this),e.nodes=t.concat(e.nodes)},m.prototype.populateGlobalScope=function(){var e=this.global.scope;Object.keys(u).forEach(function(t){var o=u[t],n=new s.RGBA(o[0],o[1],o[2],o[3]),r=new s.Ident(t,n);n.name=t,e.add(r)}),e.add(new s.Ident("embedurl",new s.Function("embedurl",o("../functions/url")({limit:!1}))));var t=this.globals;Object.keys(t).forEach(function(o){var n=t[o];n.nodeName||(n=new s.Literal(n)),e.add(new s.Ident(o,n))})},m.prototype.evaluate=function(){return this.setup(),this.visit(this.root)},m.prototype.visitGroup=function(e){return e.nodes=e.nodes.map(function(e){return e.val=this.interpolate(e),e},this),e.block=this.visit(e.block),e},m.prototype.visitReturn=function(e){throw e.expr=this.visit(e.expr),e},m.prototype.visitMedia=function(e){return e.block=this.visit(e.block),e.val=this.visit(e.val),e},m.prototype.visitQueryList=function(e){var t,n;if(e.nodes.forEach(this.visit,this),1==e.nodes.length&&(n=e.nodes[0],t=this.lookup(n.type))){if(t=t.first.string,!t)return e;var r=o("../parser"),s=new r(t,this.options);e=this.visit(s.queries())}return e},m.prototype.visitQuery=function(e){return e.predicate=this.visit(e.predicate),e.type=this.visit(e.type),e.nodes.forEach(this.visit,this),e},m.prototype.visitFeature=function(e){return e.name=this.interpolate(e),e.expr&&(this.ret++,e.expr=this.visit(e.expr),this.ret--),e},m.prototype.visitObject=function(e){for(var t in e.vals)e.vals[t]=this.visit(e.vals[t]);return e},m.prototype.visitMember=function(e){var t=e.left,o=e.right,n=this.visit(t).first;if("object"!=n.nodeName)throw new Error(t.toString()+" has no property ."+o);return e.val&&(this.ret++,n.set(o.name,this.visit(e.val)),this.ret--),n.get(o.name)},m.prototype.visitKeyframes=function(e){var t;return e.fabricated?e:(e.val=this.interpolate(e).trim(),(t=this.lookup(e.val))&&(e.val=t.first.string||t.first.name),e.block=this.visit(e.block),"official"!=e.prefix)?e:(this.vendors.forEach(function(t){if("ms"!=t){var o=e.clone();o.val=e.val,o.prefix=t,o.block=e.block,o.fabricated=!0,this.currentBlock.push(o)}},this),s.nil)},m.prototype.visitFunction=function(e){var t=this.stack.currentFrame.scope.lookup(e.name);t&&this.warn("local "+t.nodeName+" \""+e.name+"\" previously defined in this scope");var o=this.functions[e.name];o&&this.warn("user-defined function \""+e.name+"\" is already defined");var n=p[e.name];return n&&this.warn("built-in function \""+e.name+"\" is already defined"),e},m.prototype.visitEach=function(e){function t(t,n){u.add(n),u.add(t),o=g.visit(e.block.clone()),m=m.concat(o.nodes)}this.ret++;var o,n,r=l.unwrap(this.visit(e.expr)),a=r.nodes.length,p=new s.Ident(e.val),c=new s.Ident(e.key||"__index__"),u=this.currentScope,d=this.currentBlock,m=[],g=this;if(this.ret--,e.block.scope=!1,1==a&&"object"==r.nodes[0].nodeName)for(var h in n=r.nodes[0],n.vals)p.val=new s.String(h),c.val=n.get(h),t(c,p);else for(var y=0;y<a;++y)p.val=r.nodes[y],c.val=new s.Unit(y),t(c,p);return this.mixin(m,d),m[m.length-1]||s.nil},m.prototype.visitCall=function(e){var t,o,n=this.lookup(e.name);if(this.ignoreColors="url"==e.name,n&&"expression"==n.nodeName&&(n=n.nodes[0]),n&&"function"!=n.nodeName&&(n=this.lookupFunction(e.name)),!n||"function"!=n.nodeName)return"calc"==this.unvendorize(e.name)?(t=e.args.nodes&&e.args.nodes[0],t&&(o=new s.Literal(e.name+t))):o=this.literalCall(e),this.ignoreColors=!1,o;if(this.calling.push(e.name),200<this.calling.length)throw new RangeError("Maximum stylus call stack size exceeded");"expression"==n.nodeName&&(n=n.first),this.ret++;var r=this.visit(e.args);for(var i in r.map)r.map[i]=this.visit(r.map[i].clone());return this.ret--,n.fn?o=this.invokeBuiltin(n.fn,r):"function"==n.nodeName&&(e.block&&(e.block=this.visit(e.block)),o=this.invokeFunction(n,r,e.block)),this.calling.pop(),this.ignoreColors=!1,o},m.prototype.visitIdent=function(e){var t;if(e.property)return(t=this.lookupProperty(e.name))?this.visit(t.expr.clone()):s.nil;if(e.val.isNull){var o=this.lookup(e.name);return o&&e.mixin&&this.mixinNode(o),o?this.visit(o):e}return this.ret++,e.val=this.visit(e.val),this.ret--,this.currentScope.add(e),e.val},m.prototype.visitBinOp=function(e){if("is defined"==e.op)return this.isDefined(e.left);this.ret++;var t=e.op,o=this.visit(e.left),n="||"==t||"&&"==t?e.right:this.visit(e.right),r=e.val?this.visit(e.val):null;this.ret--;try{return this.visit(o.operate(t,n,r))}catch(e){if("CoercionError"==e.name)switch(t){case"==":return s.no;case"!=":return s.yes;}throw e}},m.prototype.visitUnaryOp=function(e){var t=e.op,o=this.visit(e.expr);switch("!"!=t&&(o=o.first.clone(),l.assertType(o,"unit")),t){case"-":o.val=-o.val;break;case"+":o.val=+o.val;break;case"~":o.val=~o.val;break;case"!":return o.toBoolean().negate();}return o},m.prototype.visitTernary=function(e){var t=this.visit(e.cond).toBoolean();return t.isTrue?this.visit(e.trueExpr):this.visit(e.falseExpr)},m.prototype.visitExpression=function(e){for(var t=0,o=e.nodes.length;t<o;++t)e.nodes[t]=this.visit(e.nodes[t]);return this.castable(e)&&(e=this.cast(e)),e},m.prototype.visitArguments=m.prototype.visitExpression,m.prototype.visitProperty=function(e){var t=this.interpolate(e),o=this.lookup(t),n=o&&"function"==o.first.nodeName,r=~this.calling.indexOf(t),i=this.property;if(n&&!r&&!e.literal){var a=s.Arguments.fromExpression(l.unwrap(e.expr.clone()));e.name=t,this.property=e,this.ret++,this.property.expr=this.visit(e.expr),this.ret--;var p=this.visit(new s.Call(t,a));return this.property=i,p}return this.ret++,e.name=t,e.literal=!0,this.property=e,e.expr=this.visit(e.expr),this.property=i,this.ret--,e},m.prototype.visitRoot=function(e){if(e!=this.root)return e.constructor=s.Block,this.visit(e);for(var t=0;t<e.nodes.length;++t)e.index=t,e.nodes[t]=this.visit(e.nodes[t]);return e},m.prototype.visitBlock=function(e){for(this.stack.push(new a(e)),e.index=0;e.index<e.nodes.length;++e.index)try{e.nodes[e.index]=this.visit(e.nodes[e.index])}catch(t){if("return"!=t.nodeName)throw t;else if(this.ret)throw this.stack.pop(),t;else{e.nodes[e.index]=t;break}}return this.stack.pop(),e},m.prototype.visitAtblock=function(e){return e.block=this.visit(e.block),e},m.prototype.visitAtrule=function(e){return e.val=this.interpolate(e),e.block&&(e.block=this.visit(e.block)),e},m.prototype.visitSupports=function(e){var t,o=e.condition;return this.ret++,e.condition=this.visit(o),this.ret--,t=o.first,1==o.nodes.length&&"string"==t.nodeName&&(e.condition=t.string),e.block=this.visit(e.block),e},m.prototype.visitIf=function(e){var t,o=this.currentBlock,n=e.negate;this.ret++;var r=this.visit(e.cond).first.toBoolean();if(this.ret--,e.block.scope=e.block.hasMedia,n)r.isFalse&&(t=this.visit(e.block));else if(r.isTrue)t=this.visit(e.block);else if(e.elses.length)for(var a,l=e.elses,p=l.length,c=0;c<p;++c)if(!l[c].cond)l[c].scope=l[c].hasMedia,t=this.visit(l[c]);else if(l[c].block.scope=l[c].block.hasMedia,this.ret++,a=this.visit(l[c].cond).first.toBoolean(),this.ret--,a.isTrue){t=this.visit(l[c].block);break}return t&&!e.postfix&&o.node&&~["group","atrule","media","supports","keyframes"].indexOf(o.node.nodeName)?(this.mixin(t.nodes,o),s.nil):t||s.nil},m.prototype.visitExtend=function(e){var t=this.currentBlock;return"group"!=t.node.nodeName&&(t=this.closestGroup),e.selectors.forEach(function(e){t.node.extends.push({selector:this.interpolate(e.clone()).trim(),optional:e.optional,lineno:e.lineno,column:e.column})},this),s.nil},m.prototype.visitImport=function(e){this.ret++;var t,o,r=this.visit(e.path).first,a=e.once?"require":"import";if(this.ret--,"url"==r.name){if(e.once)throw new Error("You cannot @require a url");return e}if(!r.string)throw new Error("@"+a+" string expected");var p=r=r.string;if(/(?:url\s*\(\s*)?['"]?(?:#|(?:https?:)?\/\/)/i.test(r)){if(e.once)throw new Error("You cannot @require a url");return e}if(/\.css(?:"|$)/.test(r)&&(o=!0,!e.once&&!this.includeCSS))return e;if(o||/\.styl$/i.test(r)||(r+=".styl"),t=l.find(r,this.paths,this.filename),t||(t=l.lookupIndex(p,this.paths,this.filename)),!t)throw new Error("failed to locate @"+a+" file "+r);for(var c=new s.Block,u=0,d=t.length;u<d;++u)c.push(n.call(this,e,t[u],o));return c},m.prototype.invokeFunction=function(e,t,o){var n=new s.Block(e.block.parent),r=e.block.clone(n),l=this.stack.currentFrame.block;this.stack.push(new a(n));var p=this.currentScope;if("arguments"!=t.nodeName){var c=new s.Expression;c.push(t),t=s.Arguments.fromExpression(c)}if(p.add(new s.Ident("arguments",t)),p.add(new s.Ident("mixin",this.ret?s.no:new s.String(l.nodeName))),this.property){var u=this.propertyExpression(this.property,e.name);p.add(new s.Ident("current-property",u))}else p.add(new s.Ident("current-property",s.nil));for(var c=new s.Expression,d=this.calling.length-1;d--;)c.push(new s.Literal(this.calling[d]));p.add(new s.Ident("called-from",c));var d=0,m=t.nodes.length;return e.params.nodes.forEach(function(o){if(o.rest){for(o.val=new s.Expression;d<m;++d)o.val.push(t.nodes[d]);o.val.preserve=!0,o.val.isList=t.isList}else{var n=t.map[o.name]||t.nodes[d++];if(o=o.clone(),n?n.isEmpty?t.nodes[d-1]=this.visit(o):o.val=n:t.push(o.val),o.val.isNull)throw new Error("argument \""+o+"\" required for "+e)}p.add(o)},this),o&&p.add(new s.Ident("block",o,!0)),this.invoke(r,!0,e.filename)},m.prototype.invokeBuiltin=function(e,t){t=e.raw?t.nodes:l.params(e).reduce(function(e,o){var n=t.map[o]||t.nodes.shift();if(n){n=l.unwrap(n);var r=n.nodes.length;if(1<r)for(var s=0;s<r;++s)e.push(l.unwrap(n.nodes[s].first));else e.push(n.first)}return e},[]);var o=l.coerce(e.apply(this,t)),n=new s.Expression;return n.push(o),o=n,this.invoke(o)},m.prototype.invoke=function(e,t,o){var n,r=this;return o&&this.paths.push(c(o)),this.ret?(n=this.eval(e.nodes),t&&this.stack.pop()):(e=this.visit(e),t&&this.stack.pop(),this.mixin(e.nodes,this.currentBlock),n=s.nil),o&&this.paths.pop(),n},m.prototype.mixin=function(e,t){if(e.length){var o=t.nodes.length,n=t.nodes.slice(0,t.index),r=t.nodes.slice(t.index+1,o);this._mixin(e,n,t),t.index=0,t.nodes=n.concat(r)}},m.prototype._mixin=function(e,t,o){for(var n,r=e.length,a=0;a<r;++a)switch((n=e[a]).nodeName){case"return":return;case"block":this._mixin(n.nodes,t,o);break;case"media":var p=n.block.parent.node;p&&"call"!=p.nodeName&&(n.block.parent=o);case"property":var c=n.expr;n.literal&&"block"==c.first.name&&(c=l.unwrap(c),c.nodes[0]=new s.Literal("block"));default:t.push(n);}},m.prototype.mixinNode=function(e){switch(e=this.visit(e.first),e.nodeName){case"object":return this.mixinObject(e),s.nil;case"block":case"atblock":return this.mixin(e.nodes,this.currentBlock),s.nil;}},m.prototype.mixinObject=function(e){var t,n=o("../parser"),r=this.root,s="$block "+e.toBlock(),a=new n(s,l.merge({root:t},this.options));try{t=a.parse()}catch(e){throw e.filename=this.filename,e.lineno=a.lexer.lineno,e.column=a.lexer.column,e.input=s,e}t.parent=r,t.scope=!1;for(var p=this.visit(t),c=p.first.nodes,u=0,d=c.length;u<d;++u)if(c[u].block){this.mixin(c[u].block.nodes,this.currentBlock);break}},m.prototype.eval=function(e){if(!e)return s.nil;var t=e.length,o=s.nil;try{for(var n=0;n<t;++n)switch(o=e[n],o.nodeName){case"if":if("block"!=o.block.nodeName){o=this.visit(o);break}case"each":case"block":o=this.visit(o),o.nodes&&(o=this.eval(o.nodes));break;default:o=this.visit(o);}}catch(e){if("return"==e.nodeName)return e.expr;throw e}return o},m.prototype.literalCall=function(e){return e.args=this.visit(e.args),e},m.prototype.lookupProperty=function(e){for(var t,o,n,r,s=this.stack.length,a=this.currentBlock.index,l=s;s--;)if(o=this.stack[s].block,o.node)switch(o.node.nodeName){case"group":case"function":case"if":case"each":case"atrule":case"media":case"atblock":case"call":if(t=o.nodes,s+1==l){for(;a--;)if(this.property!=t[a]&&(r=this.interpolate(t[a]),e==r))return t[a].clone();}else for(n=t.length;n--;)if("property"==t[n].nodeName&&this.property!=t[n]&&(r=this.interpolate(t[n]),e==r))return t[n].clone();}return t.nil},m.prototype.__defineGetter__("closestBlock",function(){for(var e,t=this.stack.length;t--;)if(e=this.stack[t].block,e.node)switch(e.node.nodeName){case"group":case"keyframes":case"atrule":case"atblock":case"media":case"call":return e;}}),m.prototype.__defineGetter__("closestGroup",function(){for(var e,t=this.stack.length;t--;)if(e=this.stack[t].block,e.node&&"group"==e.node.nodeName)return e}),m.prototype.__defineGetter__("selectorStack",function(){for(var e,t=[],o=0,n=this.stack.length;o<n;++o)e=this.stack[o].block,e.node&&"group"==e.node.nodeName&&(e.node.nodes.forEach(function(e){e.val||(e.val=this.interpolate(e))},this),t.push(e.node.nodes));return t}),m.prototype.lookup=function(e){var t;return this.ignoreColors&&e in u?void 0:(t=this.stack.lookup(e))?l.unwrap(t):this.lookupFunction(e)},m.prototype.interpolate=function(e){function t(e){switch(e.nodeName){case"function":case"ident":return e.name;case"literal":case"string":return!o.prefix||e.prefixed||e.val.nodeName||(e.val=e.val.replace(/\./g,"."+o.prefix),e.prefixed=!0),e.val;case"unit":return"%"==e.type?e.val+"%":e.val;case"member":return t(o.visit(e));case"expression":if(o.calling&&~o.calling.indexOf("selector")&&o._selector)return o._selector;o.ret++;var r=t(o.visit(e).first);return o.ret--,n&&(o._selector=r),r;}}var o=this,n="selector"==e.nodeName;return e.segments?e.segments.map(t).join(""):t(e)},m.prototype.lookupFunction=function(e){var t=this.functions[e]||p[e];if(t)return new s.Function(e,t)},m.prototype.isDefined=function(e){if("ident"==e.nodeName)return s.Boolean(this.lookup(e.name));throw new Error("invalid \"is defined\" check on non-variable "+e)},m.prototype.propertyExpression=function(e,t){function o(e){return"call"==e.nodeName&&t==e.name?new s.Literal("__CALL__"):(e.nodes&&(e.nodes=e.nodes.map(o)),e)}var n=new s.Expression,r=e.expr.clone();return n.push(new s.String(e.name)),o(r),n.push(r),n},m.prototype.cast=function(e){return new s.Unit(e.first.val,e.nodes[1].name)},m.prototype.castable=function(e){return 2==e.nodes.length&&"unit"==e.first.nodeName&&~d.indexOf(e.nodes[1].name)},m.prototype.warn=function(e){this.warnings&&console.warn("\x1B[33mWarning:\x1B[0m "+e)},m.prototype.__defineGetter__("currentBlock",function(){return this.stack.currentFrame.block}),m.prototype.__defineGetter__("vendors",function(){return this.lookup("vendors").nodes.map(function(e){return e.string})}),m.prototype.unvendorize=function(e){for(var t=0,o=this.vendors.length;t<o;t++)if("official"!=this.vendors[t]){var n="-"+this.vendors[t]+"-";if(~e.indexOf(n))return e.replace(n,"")}return e},m.prototype.__defineGetter__("currentScope",function(){return this.stack.currentFrame.scope}),m.prototype.__defineGetter__("currentFrame",function(){return this.stack.currentFrame})}),e.register("visitor/normalizer.js",function(e,t,o){var n=o("./index"),r=o("../nodes/index"),s=o("../utils"),i=e.exports=function(e,t){t=t||{},n.call(this,e),this.hoist=t["hoist atrules"],this.stack=[],this.map={},this.imports=[]};i.prototype.__proto__=n.prototype,i.prototype.normalize=function(){var e=this.visit(this.root);return this.hoist&&(this.imports.length&&(e.nodes=this.imports.concat(e.nodes)),this.charset&&(e.nodes=[this.charset].concat(e.nodes))),e},i.prototype.bubble=function(e){function t(e){e.nodes.forEach(function(e){switch(e=s.visit(e),e.nodeName){case"property":o.push(e);break;case"block":t(e);break;default:n.push(e);}})}var o=[],n=[],s=this;if(t(e.block),o.length){var i=new r.Selector([new r.Literal("&")]);i.lineno=e.lineno,i.column=e.column,i.filename=e.filename,i.val="&";var a=new r.Group;a.lineno=e.lineno,a.column=e.column,a.filename=e.filename;var l=new r.Block(e.block,a);l.lineno=e.lineno,l.column=e.column,l.filename=e.filename,o.forEach(function(e){l.push(e)}),a.push(i),a.block=l,e.block.nodes=[],e.block.push(a),n.forEach(function(t){e.block.push(t)});var a=this.closestGroup(e.block);a&&(e.group=a.clone()),e.bubbled=!0}},i.prototype.closestGroup=function(e){for(var t,o=e.parent;o&&(t=o.node);){if("group"==t.nodeName)return t;o=t.block&&t.block.parent}},i.prototype.visitRoot=function(e){for(var t,o=new r.Root,n=0;n<e.nodes.length;++n)switch(t=e.nodes[n],t.nodeName){case"null":case"expression":case"function":case"unit":case"atblock":continue;default:this.rootIndex=n,o.push(this.visit(t));}return o},i.prototype.visitProperty=function(e){return this.visit(e.expr),e},i.prototype.visitExpression=function(e){return e.nodes=e.nodes.map(function(t){if("block"==t.nodeName){var o=new r.Literal("block");return o.lineno=e.lineno,o.column=e.column,o}return t}),e},i.prototype.visitBlock=function(e){var t;if(e.hasProperties)for(var o=0,n=e.nodes.length;o<n;++o)switch(t=e.nodes[o],t.nodeName){case"null":case"expression":case"function":case"group":case"unit":case"atblock":continue;default:e.nodes[o]=this.visit(t);}for(var o=0,n=e.nodes.length;o<n;++o)t=e.nodes[o],e.nodes[o]=this.visit(t);return e},i.prototype.visitGroup=function(e){var t,o=this.stack,n=this.map;e.nodes.forEach(function(o,n){if(~o.val.indexOf(",")){if(~o.val.indexOf("\\,"))return void(o.val=o.val.replace(/\\,/g,","));t=o.val.split(",");for(var a,l,p="/"==o.val.charAt(0),c=0,u=t.length;void 0>c;++c)a=t[c].trim(),p&&0<c&&!~a.indexOf("&")&&(a="/"+a),l=new r.Selector([new r.Literal(a)]),l.val=a,l.block=e.block,e.nodes[n++]=l}}),o.push(e.nodes);var i=s.compileSelectors(o,!0);return i.forEach(function(t){n[t]=n[t]||[],n[t].push(e)}),this.extend(e,i),o.pop(),e},i.prototype.visitFunction=function(){return r.nil},i.prototype.visitMedia=function(e){function t(o){o.nodes.forEach(function(s,a){switch(s.nodeName){case"media":s.val=e.val.merge(s.val),n.push(s),o.nodes[a]=r.nil;break;case"block":t(s);break;default:s.block&&s.block.nodes&&t(s.block);}})}var o,n=[],s=this.closestGroup(e.block);return t(e.block),this.bubble(e),n.length&&n.forEach(function(e){s?s.block.push(e):this.root.nodes.splice(++this.rootIndex,0,e),e=this.visit(e),o=e.block.parent,e.bubbled&&(!s||"group"==o.node.nodeName)&&(e.group.block=e.block.nodes[0].block,e.block.nodes[0]=e.group)},this),e},i.prototype.visitSupports=function(e){return this.bubble(e),e},i.prototype.visitAtrule=function(e){return e.block&&(e.block=this.visit(e.block)),e},i.prototype.visitKeyframes=function(e){var t=e.block.nodes.filter(function(e){return e.block&&e.block.hasProperties});return e.frames=t.length,e},i.prototype.visitImport=function(e){return this.imports.push(e),this.hoist?r.nil:e},i.prototype.visitCharset=function(e){return this.charset=e,this.hoist?r.nil:e},i.prototype.extend=function(e,t){var o=this.map,n=this,s=this.closestGroup(e.block);e.extends.forEach(function(e){var i=o[e.selector];if(!i){if(e.optional)return;var a=new Error("Failed to @extend \""+e.selector+"\"");throw a.lineno=e.lineno,a.column=e.column,a}t.forEach(function(e){var o=new r.Selector;o.val=e,o.inherits=!1,i.forEach(function(e){s&&s==e||n.extend(e,t),e.push(o)})})}),e.block=this.visit(e.block)}}),e("stylus")}();window&&async function(){let e=document.querySelectorAll("link[rel=stylesheet][type='text/stylus']");if(e)for(let t of e)try{console.log(t.href);let e=await(await fetch(t.href)).text();e=stylus.render(e);let o=document.createElement("style");o.textContent=e,document.head.appendChild(o),t.remove()}catch(e){}}();
